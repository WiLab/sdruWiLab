<pre class="code">
<span class="srcline"><span class="lineno"><a href="8,1" id="srcline1">  1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T2045U3">hPreambleDemod</span>,<span class="var type1" id="S3T2044U4">hDataDemod</span>, <span class="var type1" id="S4T705U5">r</span>, <span class="var type1" id="S5T767U6">tx</span> ] = generateOFDMSignal_TX2(<span class="mxinfo" id="T151:U5"><span class="var type2" id="S6T151V26U9">inputPayloadMessage</span></span>, <span class="var type1" id="S7T1U10">samplingFreq</span>, <span class="var type1" id="S8T1U11">originNode</span>, <span class="var type1" id="S9T1U12">destNode</span> )</span></span>
<span class="srcline"><span class="lineno"><a href="8,2" id="srcline2">  2</a></span><span class="line"><span class="comment">% generateOFDMSignal: Generate OFDM signal based on the 802.11a standard.</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,3" id="srcline3">  3</a></span><span class="line"><span class="comment">% This function returns the time domain signal and a structure containing</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,4" id="srcline4">  4</a></span><span class="line"><span class="comment">% details about the signal itself.  This information is required by the</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,5" id="srcline5">  5</a></span><span class="line"><span class="comment">% receiver to operate correctly.</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,6" id="srcline6">  6</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,7" id="srcline7">  7</a></span><span class="line"><span class="comment">%% System Parameters</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,8" id="srcline8">  8</a></span><span class="line"><span class="mxinfo" id="T1:U10"><span class="var type1" id="S10T1U15">FFTLength</span> = <span class="mxinfo" id="T1:U12">64</span></span>;         <span class="comment">% OFDM modulator FFT size</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,9" id="srcline9">  9</a></span><span class="line"><span class="mxinfo" id="T2:U13"><span class="var type1" id="S11T2U19">enableMA</span> = <span class="mxinfo" id="T2:U15">true</span></span>;    <span class="comment">% Enable moving averages for estimates</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,10" id="srcline10"> 10</a></span><span class="line"><span class="mxinfo" id="T1:U16"><span class="var type1" id="S13T1U24">numFrames</span> = <span class="mxinfo" id="T1:U18">30</span></span>;<span class="comment">%30     % Make larger to reduce underflow on USRP</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,11" id="srcline11"> 11</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,12" id="srcline12"> 12</a></span><span class="line"><span class="comment">% Message to transmit</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,13" id="srcline13"> 13</a></span><span class="line"><span class="comment">% message is 80 characters max, so extra 3 for EOF, 1 for uniqueID, 1 for</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,14" id="srcline14"> 14</a></span><span class="line"><span class="comment">% the node number of recipient, 1 for origin node</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,15" id="srcline15"> 15</a></span><span class="line"><span class="keyword">if</span> length(<span class="var type1" id="S6T151U31">inputPayloadMessage</span>) &lt; 74</span></span>
<span class="srcline"><span class="lineno"><a href="8,16" id="srcline16"> 16</a></span><span class="line">   <span class="mxinfo" id="T13:U20"><span class="var type1" id="S15T13U35">uniqueID</span> = <span class="mxinfo" id="T13:U22">char(<span class="mxinfo" id="T1:U23">randi([0 (2^7)-1],1,1)</span>)</span></span>;<span class="comment">%Add additional character to differentiate messages</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,17" id="srcline17"> 17</a></span><span class="line">   <span class="mxinfo" id="T13:U24"><span class="var type1" id="S18T13U53">destNodeChar</span> = <span class="mxinfo" id="T13:U26">char(<span class="mxinfo" id="T1:U27"><span class="mxinfo" id="T1:U28">48</span> + <span class="var type1" id="S9T1U58">destNode</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,18" id="srcline18"> 18</a></span><span class="line">   <span class="mxinfo" id="T13:U30"><span class="var type1" id="S19T13U61">originNodeChar</span> = <span class="mxinfo" id="T13:U32">char(<span class="mxinfo" id="T1:U33"><span class="mxinfo" id="T1:U34">48</span> + <span class="var type1" id="S8T1U66">originNode</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,19" id="srcline19"> 19</a></span><span class="line">   <span class="mxinfo" id="T216:U36"><span class="var type1" id="S20T216U69">payloadMessage</span> = <span class="mxinfo" id="T216:U38">[<span class="var type1" id="S6T151U72">inputPayloadMessage</span>,<span class="var type1" id="S19T13U73">originNodeChar</span>,<span class="var type1" id="S18T13U74">destNodeChar</span>,<span class="var type1" id="S15T13U75">uniqueID</span>,<span class="mxinfo" id="T151:U43"><span class="string">'EOF'</span></span>,<span class="mxinfo" id="T1776:U44">repmat(<span class="string">'-'</span>,1,74 - length(<span class="var type1" id="S6T151U85">inputPayloadMessage</span>))</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,20" id="srcline20"> 20</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,21" id="srcline21"> 21</a></span><span class="line">    fprintf(<span class="string">'ERROR: Message incorrect format\n'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="8,22" id="srcline22"> 22</a></span><span class="line">    <span class="keyword">return</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,23" id="srcline23"> 23</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,24" id="srcline24"> 24</a></span><span class="line"><span class="comment">%% Create Short Preamble</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,25" id="srcline25"> 25</a></span><span class="line"><span class="mxinfo" id="T119:U46"><span class="var type1" id="S23T119U94">shortPreamble</span> = <span class="mxinfo" id="T119:U48">[ 0 0  1+1i 0 0 0  -1-1i 0 0 0 <span class="keyword">...</span></span></span><span class="comment"><span class="mxinfo" id="T119:U46"><span class="mxinfo" id="T119:U48"> </span></span><span class="comment"><span class="mxinfo" id="T119:U46"><span class="mxinfo" id="T119:U48">% [-27:-17]</span></span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,26" id="srcline26"> 26</a></span><span class="line"><span class="mxinfo" id="T119:U46"><span class="mxinfo" id="T119:U48"> 1+1i 0 0 0  -1-1i 0 0 0 -1-1i 0 0 0   1+1i 0 0 0 <span class="keyword">...</span></span></span><span class="comment"><span class="mxinfo" id="T119:U46"><span class="mxinfo" id="T119:U48"> </span></span><span class="comment"><span class="mxinfo" id="T119:U46"><span class="mxinfo" id="T119:U48">% [-16:-1]</span></span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,27" id="srcline27"> 27</a></span><span class="line"><span class="mxinfo" id="T119:U46"><span class="mxinfo" id="T119:U48"> 0    0 0 0  -1-1i 0 0 0 -1-1i 0 0 0   1+1i 0 0 0 <span class="keyword">...</span></span></span><span class="comment"><span class="mxinfo" id="T119:U46"><span class="mxinfo" id="T119:U48"> </span></span><span class="comment"><span class="mxinfo" id="T119:U46"><span class="mxinfo" id="T119:U48">% [0:15]</span></span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,28" id="srcline28"> 28</a></span><span class="line"><span class="mxinfo" id="T119:U46"><span class="mxinfo" id="T119:U48"> 1+1i 0 0 0   1+1i 0 0 0  1+1i 0 0 ].'</span></span>;               <span class="comment">% [16:27]</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,29" id="srcline29"> 29</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,30" id="srcline30"> 30</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,31" id="srcline31"> 31</a></span><span class="line"><span class="comment">% % Create modulator</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,32" id="srcline32"> 32</a></span><span class="line"><span class="comment">% hPreambleMod = OFDMModulator(<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,33" id="srcline33"> 33</a></span><span class="line"><span class="comment">%     'NumGuardBandCarriers', [6; 5],<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,34" id="srcline34"> 34</a></span><span class="line"><span class="comment">%     'CyclicPrefixLength',   0,<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,35" id="srcline35"> 35</a></span><span class="line"><span class="comment">%     'FFTLength' ,           FFTLength,<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,36" id="srcline36"> 36</a></span><span class="line"><span class="comment">%     'NumSymbols',           1);    </span></span></span>
<span class="srcline"><span class="lineno"><a href="8,37" id="srcline37"> 37</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,38" id="srcline38"> 38</a></span><span class="line"><span class="comment">% Create modulator</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,39" id="srcline39"> 39</a></span><span class="line"><span class="mxinfo" id="T1777:U49"><span class="var type1" id="S24T1777U182">hPreambleMod</span> = <span class="mxinfo" id="T1777:U51"><span class="fcn" id="F35N43:B184">OFDMModulator</span>(<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,40" id="srcline40"> 40</a></span><span class="line"><span class="mxinfo" id="T1777:U49"><span class="mxinfo" id="T1777:U51">    <span class="string">'NumGuardBandCarriers'</span>, [6; 5],<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,41" id="srcline41"> 41</a></span><span class="line"><span class="mxinfo" id="T1777:U49"><span class="mxinfo" id="T1777:U51">    <span class="string">'CyclicPrefixLength'</span>,   0,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,42" id="srcline42"> 42</a></span><span class="line"><span class="mxinfo" id="T1777:U49"><span class="mxinfo" id="T1777:U51">    <span class="string">'FFTLength'</span> ,           64,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,43" id="srcline43"> 43</a></span><span class="line"><span class="mxinfo" id="T1777:U49"><span class="mxinfo" id="T1777:U51">    <span class="string">'NumSymbols'</span>,           1)</span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="8,44" id="srcline44"> 44</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,45" id="srcline45"> 45</a></span><span class="line"><span class="comment">% Modulate and scale</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,46" id="srcline46"> 46</a></span><span class="line"><span class="mxinfo" id="T197:U52"><span class="var type1" id="S26T197U199">shortPreambleOFDM</span> = <span class="mxinfo" id="T197:U54"><span class="mxinfo" id="T1:U55">sqrt(13/6)</span>*<span class="mxinfo" id="T197:U56">step(<span class="var type1" id="S24T1777U208">hPreambleMod</span>, <span class="var type1" id="S23T119U209">shortPreamble</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,47" id="srcline47"> 47</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,48" id="srcline48"> 48</a></span><span class="line"><span class="comment">% Form 10 Short Preambles</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,49" id="srcline49"> 49</a></span><span class="line"><span class="mxinfo" id="T702:U59"><span class="var type1" id="S29T702U212">completeShortPreambleOFDM</span> = <span class="mxinfo" id="T702:U61">[<span class="var type1" id="S26T197U215">shortPreambleOFDM</span>; <span class="var type1" id="S26T197U217">shortPreambleOFDM</span>; <span class="mxinfo" id="T2098:U64"><span class="var type1" id="S26T197U220">shortPreambleOFDM</span>(<span class="mxinfo" id="T2099:U66"><span class="mxinfo" id="T1:U67">1</span>:<span class="mxinfo" id="T1:U68">32</span></span>)</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,50" id="srcline50"> 50</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,51" id="srcline51"> 51</a></span><span class="line"><span class="comment">%% Create Long Preamble</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,52" id="srcline52"> 52</a></span><span class="line"><span class="mxinfo" id="T209:U69"><span class="var type1" id="S30T209U226">longPreamble</span> = <span class="mxinfo" id="T209:U71">[1,  1, -1, -1,  1,  1, -1,  1, -1,  1,  1,  1,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,53" id="srcline53"> 53</a></span><span class="line"><span class="mxinfo" id="T209:U69"><span class="mxinfo" id="T209:U71">                   1,  1,  1, -1, -1,  1,  1, -1,  1, -1,  1,  1,  1,  1, 0,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,54" id="srcline54"> 54</a></span><span class="line"><span class="mxinfo" id="T209:U69"><span class="mxinfo" id="T209:U71">                   1, -1, -1,  1,  1, -1,  1, -1,  1, -1, -1, -1, -1, -1,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,55" id="srcline55"> 55</a></span><span class="line"><span class="mxinfo" id="T209:U69"><span class="mxinfo" id="T209:U71">                   1,  1, -1, -1,  1, -1,  1, -1,  1,  1,  1,  1].'</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,56" id="srcline56"> 56</a></span><span class="line"> </span></span>
<span class="srcline"><span class="lineno"><a href="8,57" id="srcline57"> 57</a></span><span class="line"><span class="comment">% Modulate</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,58" id="srcline58"> 58</a></span><span class="line"><span class="mxinfo" id="T197:U72"><span class="var type1" id="S31T197U306">longPreambleOFDM</span> = <span class="mxinfo" id="T197:U74">step( <span class="var type1" id="S24T1777U309">hPreambleMod</span>, complex(<span class="var type1" id="S30T209U312">longPreamble</span>,0) )</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,59" id="srcline59"> 59</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,60" id="srcline60"> 60</a></span><span class="line"><span class="comment">% Form 2 Long Preambles</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,61" id="srcline61"> 61</a></span><span class="line"><span class="mxinfo" id="T702:U77"><span class="var type1" id="S33T702U316">completeLongPreambleOFDM</span> =<span class="mxinfo" id="T702:U79">[<span class="mxinfo" id="T2098:U80"><span class="var type1" id="S31T197U320">longPreambleOFDM</span>(<span class="mxinfo" id="T2099:U82"><span class="mxinfo" id="T1:U83">33</span>:<span class="mxinfo" id="T1:U84">64</span></span>)</span>; <span class="var type1" id="S31T197U325">longPreambleOFDM</span>; <span class="var type1" id="S31T197U327">longPreambleOFDM</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,62" id="srcline62"> 62</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,63" id="srcline63"> 63</a></span><span class="line"><span class="comment">%% Generate Data</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,64" id="srcline64"> 64</a></span><span class="line"><span class="mxinfo" id="T1:U87"><span class="var type1" id="S34T1U330">numCarriers</span> = <span class="mxinfo" id="T1:U89">48</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,65" id="srcline65"> 65</a></span><span class="line"><span class="mxinfo" id="T1:U90"><span class="var type1" id="S35T1U334">CyclicPrefixLength</span> = <span class="mxinfo" id="T1:U92">16</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,66" id="srcline66"> 66</a></span><span class="line"><span class="mxinfo" id="T154:U93"><span class="var type1" id="S36T154U338">PilotCarrierIndices</span> = <span class="mxinfo" id="T154:U95">[12;26;40;54]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,67" id="srcline67"> 67</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,68" id="srcline68"> 68</a></span><span class="line"><span class="comment">% Use string as message</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,69" id="srcline69"> 69</a></span><span class="line"><span class="mxinfo" id="T221:U96"><span class="var type1" id="S37T221U350">originalData</span> = <span class="mxinfo" id="T221:U98"><span class="fcn" id="F385N58:B352">OFDMletters2bits</span>(<span class="var type1" id="S20T216U353">payloadMessage</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,70" id="srcline70"> 70</a></span><span class="line"><span class="mxinfo" id="T223:U100"><span class="var type1" id="S37T223U356">originalData</span> = <span class="mxinfo" id="T223:U102">reshape(<span class="mxinfo" id="T222:U103"><span class="var type1" id="S37T221U360">originalData</span>.'</span>,size(<span class="var type1" id="S37T221U364">originalData</span>,1)*size(<span class="var type1" id="S37T221U368">originalData</span>,2),1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,71" id="srcline71"> 71</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,72" id="srcline72"> 72</a></span><span class="line"><span class="comment">% Generate CRC</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,73" id="srcline73"> 73</a></span><span class="line"><span class="mxinfo" id="T1851:U107"><span class="var type1" id="S41T1851U373">hGen</span> = <span class="mxinfo" id="T1851:U109">comm.CRCGenerator([1 0 0 1], <span class="string">'ChecksumsPerFrame'</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,74" id="srcline74"> 74</a></span><span class="line"><span class="mxinfo" id="T381:U110"><span class="var type1" id="S43T381U388">dataWithCRC</span> = <span class="mxinfo" id="T381:U112">step(<span class="var type1" id="S41T1851U391">hGen</span>, <span class="var type1" id="S37T223U392">originalData</span>)</span></span>;<span class="comment">% Add CRC</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,75" id="srcline75"> 75</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,76" id="srcline76"> 76</a></span><span class="line"><span class="comment">% Construct modulator for each subcarrier</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,77" id="srcline77"> 77</a></span><span class="line"><span class="mxinfo" id="T1919:U115"><span class="var type1" id="S44T1919U395">hMod</span> = <span class="mxinfo" id="T1919:U117">comm.BPSKModulator</span></span>; <span class="comment">% BPSK</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,78" id="srcline78"> 78</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,79" id="srcline79"> 79</a></span><span class="line"><span class="comment">% Apply modulator for each subcarrier</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,80" id="srcline80"> 80</a></span><span class="line"><span class="mxinfo" id="T469:U118"><span class="var type1" id="S45T469U401">modData</span> = <span class="mxinfo" id="T469:U120">step(<span class="var type1" id="S44T1919U404">hMod</span>, <span class="var type1" id="S43T381U405">dataWithCRC</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,81" id="srcline81"> 81</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,82" id="srcline82"> 82</a></span><span class="line"><span class="comment">% Pad IFFT</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,83" id="srcline83"> 83</a></span><span class="line"><span class="mxinfo" id="T1:U123"><span class="var type1" id="S46T1U408">padBits</span> = <span class="mxinfo" id="T1:U125"><span class="var type1" id="S34T1U410">numCarriers</span> - mod(length(<span class="var type1" id="S45T469U415">modData</span>),<span class="var type1" id="S34T1U416">numCarriers</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,84" id="srcline84"> 84</a></span><span class="line"><span class="keyword">if</span> <span class="var type1" id="S46T1U420">padBits</span> == <span class="var type1" id="S34T1U421">numCarriers</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,85" id="srcline85"> 85</a></span><span class="line">    <span class="var type0" id="S46T0U424">padBits</span> = 0;</span></span>
<span class="srcline"><span class="lineno"><a href="8,86" id="srcline86"> 86</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,87" id="srcline87"> 87</a></span><span class="line"><span class="mxinfo" id="T534:U131"><span class="var type1" id="S45T534U428">modData</span> = <span class="mxinfo" id="T534:U133">[<span class="var type1" id="S45T469U431">modData</span>; <span class="mxinfo" id="T532:U135">step(<span class="var type1" id="S44T1919U435">hMod</span>,<span class="mxinfo" id="T471:U137">randi([0 1],<span class="var type1" id="S46T1U442">padBits</span>,1)</span>)</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,88" id="srcline88"> 88</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,89" id="srcline89"> 89</a></span><span class="line"><span class="comment">% Calculate required data sizes for correct receiver operation</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,90" id="srcline90"> 90</a></span><span class="line"><span class="mxinfo" id="T1:U139"><span class="var type1" id="S48T1U446">numDataSymbols</span> = <span class="mxinfo" id="T1:U141">length(<span class="var type1" id="S45T534U450">modData</span>)/<span class="var type1" id="S34T1U451">numCarriers</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,91" id="srcline91"> 91</a></span><span class="line"><span class="mxinfo" id="T1:U144"><span class="var type1" id="S49T1U454">numSamples</span> = <span class="mxinfo" id="T1:U146">length(<span class="var type1" id="S45T534U457">modData</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,92" id="srcline92"> 92</a></span><span class="line"><span class="mxinfo" id="T1:U148"><span class="var type1" id="S50T1U460">messageCharacters</span> = <span class="mxinfo" id="T1:U150">length(<span class="var type1" id="S20T216U463">payloadMessage</span>)</span></span>; <span class="comment">% Save desired message size</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,93" id="srcline93"> 93</a></span><span class="line"><span class="mxinfo" id="T1:U152"><span class="var type1" id="S13T1U466">numFrames</span> = <span class="mxinfo" id="T1:U154"><span class="var type1" id="S13T1U467">numFrames</span></span></span>; <span class="comment">% Save number of transmitted frames</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,94" id="srcline94"> 94</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,95" id="srcline95"> 95</a></span><span class="line"><span class="comment">% Convert data into subcarrier streams</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,96" id="srcline96"> 96</a></span><span class="line"><span class="mxinfo" id="T536:U156"><span class="var type1" id="S51T536U470">ofdmData</span> = <span class="mxinfo" id="T536:U158">reshape(<span class="mxinfo" id="T535:U159"><span class="var type1" id="S45T534U474">modData</span>.'</span>, <span class="var type1" id="S34T1U475">numCarriers</span>, length(<span class="var type1" id="S45T534U479">modData</span>)/<span class="var type1" id="S34T1U480">numCarriers</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,97" id="srcline97"> 97</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,98" id="srcline98"> 98</a></span><span class="line"><span class="comment">% Create Pilots</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,99" id="srcline99"> 99</a></span><span class="line"><span class="mxinfo" id="T2042:U164"><span class="var type1" id="S52T2042U483">hPN</span> = <span class="mxinfo" id="T2042:U166">comm.PNSequence(<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,100" id="srcline100">100</a></span><span class="line"><span class="mxinfo" id="T2042:U164"><span class="mxinfo" id="T2042:U166">        <span class="string">'Polynomial'</span>,[1 0 0 0 1 0 0 1],<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,101" id="srcline101">101</a></span><span class="line"><span class="mxinfo" id="T2042:U164"><span class="mxinfo" id="T2042:U166">        <span class="string">'SamplesPerFrame'</span>, <span class="var type1" id="S48T1U500">numDataSymbols</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,102" id="srcline102">102</a></span><span class="line"><span class="mxinfo" id="T2042:U164"><span class="mxinfo" id="T2042:U166">        <span class="string">'InitialConditions'</span>,[1 1 1 1 1 1 1])</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,103" id="srcline103">103</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,104" id="srcline104">104</a></span><span class="line"><span class="mxinfo" id="T539:U168"><span class="var type1" id="S53T539U513">pilot</span> = <span class="mxinfo" id="T539:U170">step(<span class="var type1" id="S52T2042U516">hPN</span>)</span></span>; <span class="comment">% Create pilot</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,105" id="srcline105">105</a></span><span class="line"><span class="mxinfo" id="T540:U172"><span class="var type1" id="S54T540U519">pilots</span> = <span class="mxinfo" id="T540:U174">repmat(<span class="var type1" id="S53T539U522">pilot</span>, 1, 4 )</span></span>; <span class="comment">% Expand to all pilot tones</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,106" id="srcline106">106</a></span><span class="line"><span class="mxinfo" id="T541:U176"><span class="var type1" id="S54T541U527">pilots</span> = <span class="mxinfo" id="T541:U178"><span class="mxinfo" id="T541:U179"><span class="mxinfo" id="T1:U180">2</span>*<span class="mxinfo" id="T541:U181">double(<span class="mxinfo" id="T2100:U182"><span class="mxinfo" id="T541:U183"><span class="var type1" id="S54T540U535">pilots</span>.'</span>&lt;<span class="mxinfo" id="T1:U185">1</span></span>)</span></span>-<span class="mxinfo" id="T1:U186">1</span></span></span>; <span class="comment">% Bipolar to unipolar</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,107" id="srcline107">107</a></span><span class="line"><span class="mxinfo" id="T542:U187"><span class="mxinfo" id="T542:U188"><span class="var type1" id="S54T541U541">pilots</span>(<span class="mxinfo" id="T1:U190">4</span>,:)</span> = <span class="mxinfo" id="T542:U191"><span class="mxinfo" id="T1:U192">-1</span>*<span class="mxinfo" id="T542:U193"><span class="var type1" id="S54T541U548">pilots</span>(<span class="mxinfo" id="T1:U195">4</span>,:)</span></span></span>; <span class="comment">% Invert last pilot</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,108" id="srcline108">108</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,109" id="srcline109">109</a></span><span class="line"><span class="comment">% Construct Modulator</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,110" id="srcline110">110</a></span><span class="line"><span class="mxinfo" id="T2043:U196"><span class="var type1" id="S56T2043U553">hDataMod</span> = <span class="mxinfo" id="T2043:U198"><span class="fcn" id="F1052N55:B555">OFDMModulator</span>(<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,111" id="srcline111">111</a></span><span class="line"><span class="mxinfo" id="T2043:U196"><span class="mxinfo" id="T2043:U198">    <span class="string">'CyclicPrefixLength'</span>,   <span class="var type1" id="S35T1U557">CyclicPrefixLength</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,112" id="srcline112">112</a></span><span class="line"><span class="mxinfo" id="T2043:U196"><span class="mxinfo" id="T2043:U198">    <span class="string">'FFTLength'</span> ,           <span class="var type1" id="S10T1U559">FFTLength</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,113" id="srcline113">113</a></span><span class="line"><span class="mxinfo" id="T2043:U196"><span class="mxinfo" id="T2043:U198">    <span class="string">'NumGuardBandCarriers'</span>, <span class="var type1" id="S24T1777U562">hPreambleMod</span>.NumGuardBandCarriers,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,114" id="srcline114">114</a></span><span class="line"><span class="mxinfo" id="T2043:U196"><span class="mxinfo" id="T2043:U198">    <span class="string">'NumSymbols'</span>,           <span class="var type1" id="S48T1U565">numDataSymbols</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,115" id="srcline115">115</a></span><span class="line"><span class="mxinfo" id="T2043:U196"><span class="mxinfo" id="T2043:U198">    <span class="string">'PilotInputPort'</span>,       true,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,116" id="srcline116">116</a></span><span class="line"><span class="mxinfo" id="T2043:U196"><span class="mxinfo" id="T2043:U198">    <span class="string">'PilotCarrierIndices'</span>,  <span class="var type1" id="S36T154U570">PilotCarrierIndices</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,117" id="srcline117">117</a></span><span class="line"><span class="mxinfo" id="T2043:U196"><span class="mxinfo" id="T2043:U198">    <span class="string">'InsertDCNull'</span>,         true)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,118" id="srcline118">118</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,119" id="srcline119">119</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,120" id="srcline120">120</a></span><span class="line"><span class="comment">% Modulate</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,121" id="srcline121">121</a></span><span class="line"><span class="mxinfo" id="T701:U204"><span class="var type1" id="S4T701U576">r</span> = <span class="mxinfo" id="T701:U206">step(<span class="var type1" id="S56T2043U579">hDataMod</span>, <span class="var type1" id="S51T536U580">ofdmData</span>, <span class="var type1" id="S54T541U581">pilots</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,122" id="srcline122">122</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,123" id="srcline123">123</a></span><span class="line"><span class="comment">% Add preambles to data</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,124" id="srcline124">124</a></span><span class="line"><span class="mxinfo" id="T703:U210"><span class="var type1" id="S57T703U584">preambles</span> = <span class="mxinfo" id="T703:U212">[<span class="var type1" id="S29T702U587">completeShortPreambleOFDM</span>; <span class="var type1" id="S33T702U589">completeLongPreambleOFDM</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,125" id="srcline125">125</a></span><span class="line"><span class="mxinfo" id="T704:U215"><span class="var type1" id="S4T704U592">r</span> = <span class="mxinfo" id="T704:U217">[<span class="var type1" id="S57T703U595">preambles</span>; <span class="var type1" id="S4T701U597">r</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,126" id="srcline126">126</a></span><span class="line"><span class="mxinfo" id="T1:U220"><span class="var type1" id="S58T1U600">frameLength</span> = <span class="mxinfo" id="T1:U222">length(<span class="var type1" id="S4T704U603">r</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,127" id="srcline127">127</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,128" id="srcline128">128</a></span><span class="line"><span class="comment">% Repeat frame (Used in debugging)</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,129" id="srcline129">129</a></span><span class="line"><span class="mxinfo" id="T705:U224"><span class="var type1" id="S4T705U606">r</span> = <span class="mxinfo" id="T705:U226">repmat(<span class="var type1" id="S4T704U609">r</span>, <span class="var type1" id="S13T1U610">numFrames</span>, 1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,130" id="srcline130">130</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,131" id="srcline131">131</a></span><span class="line"><span class="comment">% Save Demodulator object data for receiver</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,132" id="srcline132">132</a></span><span class="line"><span class="comment">%hDataDemod = get(OFDMDemodulator(hDataMod));</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,133" id="srcline133">133</a></span><span class="line"><span class="comment">%hPreambleDemod = get(OFDMDemodulator(hPreambleMod));</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,134" id="srcline134">134</a></span><span class="line"><span class="mxinfo" id="T2044:U229"><span class="var type1" id="S3T2044U614">hDataDemod</span> = <span class="mxinfo" id="T2044:U231"><span class="fcn" id="F1381N29:B616">OFDMDemodulator</span>(<span class="var type1" id="S56T2043U617">hDataMod</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,135" id="srcline135">135</a></span><span class="line"><span class="mxinfo" id="T2045:U233"><span class="var type1" id="S2T2045U620">hPreambleDemod</span> = <span class="mxinfo" id="T2045:U235"><span class="fcn" id="F1434N35:B622">OFDMDemodulator</span>(<span class="var type1" id="S24T1777U623">hPreambleMod</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,136" id="srcline136">136</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,137" id="srcline137">137</a></span><span class="line"><span class="comment">% Calcuate OFDM frequency bin size</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,138" id="srcline138">138</a></span><span class="line"><span class="mxinfo" id="T1:U237"><span class="var type1" id="S60T1U626">freqBin</span> = <span class="mxinfo" id="T1:U239"><span class="var type1" id="S7T1U628">samplingFreq</span>/<span class="mxinfo" id="T1:U241"><span class="var type1" id="S10T1U629">FFTLength</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,139" id="srcline139">139</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,140" id="srcline140">140</a></span><span class="line"><span class="comment">% Calculate locations of pilots without guardbands</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,141" id="srcline141">141</a></span><span class="line"><span class="mxinfo" id="T154:U243"><span class="var type1" id="S61T154U632">pilotLocationsWithoutGuardbands</span> = <span class="mxinfo" id="T154:U245"><span class="var type1" id="S3T2044U635">hDataDemod</span>.PilotCarrierIndices-<span class="var type1" id="S3T2044U639">hDataDemod</span>.NumGuardBandCarriers(1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,142" id="srcline142">142</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,143" id="srcline143">143</a></span><span class="line"><span class="comment">% Calculate locations of subcarrier datastreams without guardbands</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,144" id="srcline144">144</a></span><span class="line"><span class="mxinfo" id="T764:U248"><span class="var type1" id="S62T764U644">dataSubcarrierIndexies</span> = <span class="mxinfo" id="T764:U250">1:<span class="var type1" id="S10T1U648">FFTLength</span>-sum(<span class="var type1" id="S3T2044U652">hDataDemod</span>.NumGuardBandCarriers)</span></span>;<span class="comment">%Remove guardband offsets</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,145" id="srcline145">145</a></span><span class="line"><span class="mxinfo" id="T1:U253"><span class="var type1" id="S64T1U656">DCNullLocation</span> = <span class="mxinfo" id="T1:U255"><span class="mxinfo" id="T1:U256">33</span> - <span class="mxinfo" id="T1:U257"><span class="mxinfo" id="T38:U258"><span class="var type1" id="S3T2044U661">hDataDemod</span>.NumGuardBandCarriers</span>(<span class="mxinfo" id="T1:U260">1</span>)</span></span></span>;<span class="comment">%Remove index offsets for pilots and guardbands</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,146" id="srcline146">146</a></span><span class="line"><span class="comment">%dataSubcarrierIndexies([pilotLocationsWithoutGuardbands;DCNullLocation]) = [];%Remove pilot and DCNull locations</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,147" id="srcline147">147</a></span><span class="line"><span class="mxinfo" id="T766:U261"><span class="var type1" id="S62T766U666">dataSubcarrierIndexies</span> = <span class="mxinfo" id="T2101:U263">[<span class="mxinfo" id="T173:U264">1:5</span>,<span class="mxinfo" id="T765:U265">7:19</span>,<span class="mxinfo" id="T172:U266">21:26</span>,<span class="mxinfo" id="T172:U267">28:33</span>,<span class="mxinfo" id="T765:U268">35:47</span>,<span class="mxinfo" id="T173:U269">49:53</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,148" id="srcline148">148</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,149" id="srcline149">149</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,150" id="srcline150">150</a></span><span class="line"><span class="comment">% Preallocate values needed later</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,151" id="srcline151">151</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,152" id="srcline152">152</a></span><span class="line"><span class="comment">% Create return structure</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,153" id="srcline153">153</a></span><span class="line"><span class="mxinfo" id="T767:U270"><span class="var type1" id="S5T767U689">tx</span> = <span class="mxinfo" id="T767:U272">struct(<span class="string">'originalData'</span>,<span class="var type1" id="S37T223U693">originalData</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,154" id="srcline154">154</a></span><span class="line"><span class="mxinfo" id="T767:U270"><span class="mxinfo" id="T767:U272">            <span class="string">'shortPreambleOFDM'</span>,<span class="var type1" id="S26T197U695">shortPreambleOFDM</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,155" id="srcline155">155</a></span><span class="line"><span class="mxinfo" id="T767:U270"><span class="mxinfo" id="T767:U272">            <span class="string">'completeShortPreambleOFDM'</span>,<span class="var type1" id="S29T702U697">completeShortPreambleOFDM</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,156" id="srcline156">156</a></span><span class="line"><span class="mxinfo" id="T767:U270"><span class="mxinfo" id="T767:U272">            <span class="string">'shortPreamble'</span>,<span class="mxinfo" id="T119:U276"><span class="var type1" id="S23T119U699">shortPreamble</span></span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,157" id="srcline157">157</a></span><span class="line"><span class="mxinfo" id="T767:U270"><span class="mxinfo" id="T767:U272">            <span class="string">'longPreamble'</span>,<span class="mxinfo" id="T209:U278"><span class="var type1" id="S30T209U701">longPreamble</span></span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,158" id="srcline158">158</a></span><span class="line"><span class="mxinfo" id="T767:U270"><span class="mxinfo" id="T767:U272">            <span class="string">'longPreambleOFDM'</span>,<span class="var type1" id="S31T197U703">longPreambleOFDM</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,159" id="srcline159">159</a></span><span class="line"><span class="mxinfo" id="T767:U270"><span class="mxinfo" id="T767:U272">            <span class="string">'completeLongPreambleOFDM'</span>,<span class="var type1" id="S33T702U705">completeLongPreambleOFDM</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,160" id="srcline160">160</a></span><span class="line"><span class="mxinfo" id="T767:U270"><span class="mxinfo" id="T767:U272">            <span class="string">'pilots'</span>,<span class="var type1" id="S54T541U707">pilots</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,161" id="srcline161">161</a></span><span class="line"><span class="mxinfo" id="T767:U270"><span class="mxinfo" id="T767:U272">            <span class="string">'preambles'</span>,<span class="var type1" id="S57T703U709">preambles</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,162" id="srcline162">162</a></span><span class="line"><span class="mxinfo" id="T767:U270"><span class="mxinfo" id="T767:U272">            <span class="string">'pilotLocationsWithoutGuardbands'</span>,<span class="mxinfo" id="T154:U284"><span class="var type1" id="S61T154U711">pilotLocationsWithoutGuardbands</span></span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,163" id="srcline163">163</a></span><span class="line"><span class="mxinfo" id="T767:U270"><span class="mxinfo" id="T767:U272">            <span class="string">'dataSubcarrierIndexies'</span>,<span class="var type1" id="S62T766U713">dataSubcarrierIndexies</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,164" id="srcline164">164</a></span><span class="line"><span class="mxinfo" id="T767:U270"><span class="mxinfo" id="T767:U272">            <span class="string">'samplingFreq'</span>,<span class="var type1" id="S7T1U715">samplingFreq</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,165" id="srcline165">165</a></span><span class="line"><span class="mxinfo" id="T767:U270"><span class="mxinfo" id="T767:U272">            <span class="string">'FFTLength'</span>,<span class="mxinfo" id="T1:U288"><span class="var type1" id="S10T1U717">FFTLength</span></span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,166" id="srcline166">166</a></span><span class="line"><span class="mxinfo" id="T767:U270"><span class="mxinfo" id="T767:U272">            <span class="string">'enableMA'</span>,<span class="mxinfo" id="T2:U290"><span class="var type1" id="S11T2U719">enableMA</span></span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,167" id="srcline167">167</a></span><span class="line"><span class="mxinfo" id="T767:U270"><span class="mxinfo" id="T767:U272">            <span class="string">'numCarriers'</span>,<span class="mxinfo" id="T1:U292"><span class="var type1" id="S34T1U721">numCarriers</span></span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,168" id="srcline168">168</a></span><span class="line"><span class="mxinfo" id="T767:U270"><span class="mxinfo" id="T767:U272">            <span class="string">'padBits'</span>,<span class="mxinfo" id="T1:U294"><span class="var type1" id="S46T1U723">padBits</span></span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,169" id="srcline169">169</a></span><span class="line"><span class="mxinfo" id="T767:U270"><span class="mxinfo" id="T767:U272">            <span class="string">'numSamples'</span>,<span class="mxinfo" id="T1:U296"><span class="var type1" id="S49T1U725">numSamples</span></span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,170" id="srcline170">170</a></span><span class="line"><span class="mxinfo" id="T767:U270"><span class="mxinfo" id="T767:U272">            <span class="string">'messageCharacters'</span>,<span class="mxinfo" id="T1:U298"><span class="var type1" id="S50T1U727">messageCharacters</span></span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,171" id="srcline171">171</a></span><span class="line"><span class="mxinfo" id="T767:U270"><span class="mxinfo" id="T767:U272">            <span class="string">'numFrames'</span>,<span class="mxinfo" id="T1:U300"><span class="var type1" id="S13T1U729">numFrames</span></span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,172" id="srcline172">172</a></span><span class="line"><span class="mxinfo" id="T767:U270"><span class="mxinfo" id="T767:U272">            <span class="string">'frameLength'</span>,<span class="mxinfo" id="T1:U302"><span class="var type1" id="S58T1U731">frameLength</span></span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,173" id="srcline173">173</a></span><span class="line"><span class="mxinfo" id="T767:U270"><span class="mxinfo" id="T767:U272">            <span class="string">'freqBin'</span>,<span class="var type1" id="S60T1U733">freqBin</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,174" id="srcline174">174</a></span><span class="line"><span class="mxinfo" id="T767:U270"><span class="mxinfo" id="T767:U272">            <span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,175" id="srcline175">175</a></span><span class="line"><span class="mxinfo" id="T767:U270"><span class="mxinfo" id="T767:U272">            <span class="string">'DecimationFactor'</span>,<span class="mxinfo" id="T1:U305">0</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,176" id="srcline176">176</a></span><span class="line"><span class="mxinfo" id="T767:U270"><span class="mxinfo" id="T767:U272">            <span class="string">'receiveBufferLength'</span>,<span class="mxinfo" id="T1:U306">0</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,177" id="srcline177">177</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,178" id="srcline178">178</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,179" id="srcline179">179</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,180" id="srcline180">180</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,181" id="srcline181">181</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,182" id="srcline182">182</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,183" id="srcline183">183</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,184" id="srcline184">184</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,185" id="srcline185">185</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,186" id="srcline186">186</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,187" id="srcline187">187</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,188" id="srcline188">188</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,189" id="srcline189">189</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,190" id="srcline190">190</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,191" id="srcline191">191</a></span><span class="line"></span></span>
</pre>
