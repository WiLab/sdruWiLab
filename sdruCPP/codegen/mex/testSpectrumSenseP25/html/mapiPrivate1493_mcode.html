<pre class="code">
<span class="srcline"><span class="lineno"><a href="134,1" id="srcline1">  1</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T4U3">varargout</span> = mapiPrivate(<span class="mxinfo" id="T599:U2"><span class="var type2" id="S3T599V20U6">cmd</span></span>, <span class="var type1" id="S4T6U7">varargin</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="134,2" id="srcline2">  2</a></span><span class="line"><span class="comment">%#codegen</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,3" id="srcline3">  3</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,4" id="srcline4">  4</a></span><span class="line"><span class="comment">% This function unifies handling of interp vs. codegen call as well as</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,5" id="srcline5">  5</a></span><span class="line"><span class="comment">% errStat / errStr assignment.</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,6" id="srcline6">  6</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,7" id="srcline7">  7</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="134,8" id="srcline8">  8</a></span><span class="line"><span class="comment">%   Copyright 2011-2013 The MathWorks, Inc.</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,9" id="srcline9">  9</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="134,10" id="srcline10"> 10</a></span><span class="line">coder.extrinsic(<span class="string">'setupsdru'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="134,11" id="srcline11"> 11</a></span><span class="line">coder.extrinsic(<span class="string">'sdruroot'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="134,12" id="srcline12"> 12</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="134,13" id="srcline13"> 13</a></span><span class="line"><span class="keyword">persistent</span> <span class="var type1" id="S6T2U21">isSetupsdruCalled</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,14" id="srcline14"> 14</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo" id="T2:U6"><span class="mxinfo" id="T2:U7">isempty(<span class="var type0" id="S6T0U26">isSetupsdruCalled</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="134,15" id="srcline15"> 15</a></span><span class="line">  <span class="mxinfo" id="T2:U8"><span class="var type1" id="S6T2U29">isSetupsdruCalled</span> = <span class="mxinfo" id="T2:U10">false</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,16" id="srcline16"> 16</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,17" id="srcline17"> 17</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="134,18" id="srcline18"> 18</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo" id="T2:U11">~<span class="var type1" id="S6T2U36">isSetupsdruCalled</span></span> &amp;&amp; (isempty(coder.target()) || strcmp(coder.target(), <span class="string">'mex'</span>))</span></span>
<span class="srcline"><span class="lineno"><a href="134,19" id="srcline19"> 19</a></span><span class="line">    <span class="extrinsicFcn" id="F2961N96:B54">setupsdru</span>(<span class="extrinsicFcn" id="F2960N95:B56">sdruroot</span>, <span class="string">'silent'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="134,20" id="srcline20"> 20</a></span><span class="line">    <span class="mxinfo" id="T2:U13"><span class="var type1" id="S6T2U60">isSetupsdruCalled</span> = <span class="mxinfo" id="T2:U15">true</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,21" id="srcline21"> 21</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,22" id="srcline22"> 22</a></span><span class="line">  </span></span>
<span class="srcline"><span class="lineno"><a href="134,23" id="srcline23"> 23</a></span><span class="line"><span class="mxinfo" id="T1:U16"><span class="var type1" id="S13T1U65">MAX_STR_SIZE</span>                = <span class="mxinfo" id="T1:U18">128</span></span>;   <span class="comment">% These sizes must match those in C code.</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,24" id="srcline24"> 24</a></span><span class="line"><span class="mxinfo" id="T1:U19"><span class="var type1" id="S14T1U69">MAX_DEV_DESCR_STR_SIZE</span>      = <span class="mxinfo" id="T1:U21">1024</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,25" id="srcline25"> 25</a></span><span class="line"><span class="mxinfo" id="T1:U22"><span class="var type1" id="S15T1U73">MAX_ERROR_MESSAGE_LENGTH</span>    = <span class="mxinfo" id="T1:U24">1024</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,26" id="srcline26"> 26</a></span><span class="line"><span class="mxinfo" id="T1:U25"><span class="var type1" id="S16T1U77">MAX_FRAMELENGTH</span>             = <span class="mxinfo" id="T1:U27">46336</span></span>; <span class="comment">% Arbitrary max imposed on ML/SL side</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,27" id="srcline27"> 27</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="134,28" id="srcline28"> 28</a></span><span class="line"><span class="comment">% function is being called in interpreted mode</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,29" id="srcline29"> 29</a></span><span class="line"><span class="keyword">if</span> (isempty(coder.target()))</span></span>
<span class="srcline"><span class="lineno"><a href="134,30" id="srcline30"> 30</a></span><span class="line">  </span></span>
<span class="srcline"><span class="lineno"><a href="134,31" id="srcline31"> 31</a></span><span class="line">    <span class="keyword">switch</span> (<span class="var type0" id="S3T0U90">cmd</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="134,32" id="srcline32"> 32</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'reportDrivers'</span>, <span class="string">'getSDRuDriverVersion'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="134,33" id="srcline33"> 33</a></span><span class="line">            [<span class="var type0" id="S17T0U99">retStr</span>, <span class="var type0" id="S18T0U100">errStat</span>, <span class="var type0" id="S19T0U101">errStr</span>] = usrp_uhd_mapi(<span class="var type0" id="S3T0U104">cmd</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,34" id="srcline34"> 34</a></span><span class="line">            <span class="var type0" id="S2T0U108">varargout</span>{1} = <span class="var type0" id="S17T0U110">retStr</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,35" id="srcline35"> 35</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="134,36" id="srcline36"> 36</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'getSDRuList'</span>, <span class="string">'getDeviceDescription'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="134,37" id="srcline37"> 37</a></span><span class="line">            [<span class="var type0" id="S17T0U119">retStr</span>, <span class="var type0" id="S18T0U120">errStat</span>, <span class="var type0" id="S19T0U121">errStr</span>] = usrp_uhd_mapi(<span class="var type0" id="S3T0U124">cmd</span>, <span class="var type0" id="S4T0U126">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="134,38" id="srcline38"> 38</a></span><span class="line">            <span class="var type0" id="S2T0U131">varargout</span>{1} = <span class="var type0" id="S17T0U133">retStr</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,39" id="srcline39"> 39</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="134,40" id="srcline40"> 40</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'closeDataConnection'</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,41" id="srcline41"> 41</a></span><span class="line">            [<span class="var type0" id="S18T0U139">errStat</span>, <span class="var type0" id="S19T0U140">errStr</span>] = usrp_uhd_mapi(<span class="var type0" id="S3T0U143">cmd</span>, <span class="var type0" id="S4T0U145">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="134,42" id="srcline42"> 42</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="134,43" id="srcline43"> 43</a></span><span class="line">            <span class="comment">% Unlock the mex file if called from MATLAB. This is not called for</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,44" id="srcline44"> 44</a></span><span class="line">            <span class="comment">% generated code. See "openDataConnection".</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,45" id="srcline45"> 45</a></span><span class="line">            <span class="keyword">if</span> <span class="var type0" id="S18T0U150">errStat</span> == UsrpErrorCapiEnumT.UsrpDriverSuccess</span></span>
<span class="srcline"><span class="lineno"><a href="134,46" id="srcline46"> 46</a></span><span class="line">              usrp_uhd_mapi(<span class="string">'sdruMexUnlock'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,47" id="srcline47"> 47</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,48" id="srcline48"> 48</a></span><span class="line">              </span></span>
<span class="srcline"><span class="lineno"><a href="134,49" id="srcline49"> 49</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'setClockConfig'</span>, <span class="string">'setClockConfigFull'</span>, <span class="string">'checkSDRHostName'</span>, <span class="string">'deleteDriver'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="134,50" id="srcline50"> 50</a></span><span class="line">            [<span class="var type0" id="S18T0U168">errStat</span>, <span class="var type0" id="S19T0U169">errStr</span>] = usrp_uhd_mapi(<span class="var type0" id="S3T0U172">cmd</span>, <span class="var type0" id="S4T0U174">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="134,51" id="srcline51"> 51</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="134,52" id="srcline52"> 52</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'openDataConnection'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="134,53" id="srcline53"> 53</a></span><span class="line">            [<span class="var type0" id="S2T0U184">varargout</span>{1}, <span class="var type0" id="S18T0U186">errStat</span>, <span class="var type0" id="S19T0U187">errStr</span>] = usrp_uhd_mapi(<span class="var type0" id="S3T0U190">cmd</span>, <span class="var type0" id="S4T0U192">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="134,54" id="srcline54"> 54</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="134,55" id="srcline55"> 55</a></span><span class="line">            <span class="comment">% Lock the mex file if called from MATLAB. This is not called for</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,56" id="srcline56"> 56</a></span><span class="line">            <span class="comment">% generated code. Locking the mex file in MATLAB prevents MATLAB</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,57" id="srcline57"> 57</a></span><span class="line">            <span class="comment">% from hanging if clear all is called. Clear all first deletes mex</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,58" id="srcline58"> 58</a></span><span class="line">            <span class="comment">% files. That removes the driver and hangs MATLAB if a driver is in</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,59" id="srcline59"> 59</a></span><span class="line">            <span class="comment">% use, i.e. System object is locked. Lock only if successful.</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,60" id="srcline60"> 60</a></span><span class="line">            <span class="keyword">if</span> <span class="var type0" id="S18T0U197">errStat</span> == UsrpErrorCapiEnumT.UsrpDriverSuccess</span></span>
<span class="srcline"><span class="lineno"><a href="134,61" id="srcline61"> 61</a></span><span class="line">              usrp_uhd_mapi(<span class="string">'sdruMexLock'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,62" id="srcline62"> 62</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,63" id="srcline63"> 63</a></span><span class="line">           </span></span>
<span class="srcline"><span class="lineno"><a href="134,64" id="srcline64"> 64</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'setRate'</span>, <span class="string">'setFrequency'</span>, <span class="string">'setGain'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,65" id="srcline65"> 65</a></span><span class="line">              <span class="string">'getRate'</span>, <span class="string">'getFrequency'</span>, <span class="string">'getGain'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,66" id="srcline66"> 66</a></span><span class="line">              <span class="string">'getFrequencyRange'</span>, <span class="string">'getGainRange'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,67" id="srcline67"> 67</a></span><span class="line">              <span class="string">'createDriver'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="134,68" id="srcline68"> 68</a></span><span class="line">            [<span class="var type0" id="S2T0U221">varargout</span>{1}, <span class="var type0" id="S18T0U223">errStat</span>, <span class="var type0" id="S19T0U224">errStr</span>] = usrp_uhd_mapi(<span class="var type0" id="S3T0U227">cmd</span>, <span class="var type0" id="S4T0U229">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="134,69" id="srcline69"> 69</a></span><span class="line">           </span></span>
<span class="srcline"><span class="lineno"><a href="134,70" id="srcline70"> 70</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'sendInt16Data'</span>,  <span class="string">'sendComplexInt16Data'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,71" id="srcline71"> 71</a></span><span class="line">              <span class="string">'sendSingleData'</span>, <span class="string">'sendComplexSingleData'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,72" id="srcline72"> 72</a></span><span class="line">              <span class="string">'sendDoubleData'</span>, <span class="string">'sendComplexDoubleData'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,73" id="srcline73"> 73</a></span><span class="line">              <span class="string">'sendInt16Data_x'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="134,74" id="srcline74"> 74</a></span><span class="line">            [<span class="var type0" id="S2T0U245">varargout</span>{1}, <span class="var type0" id="S18T0U247">errStat</span>, <span class="var type0" id="S19T0U248">errStr</span>] = usrp_uhd_mapi(<span class="var type0" id="S3T0U251">cmd</span>, <span class="var type0" id="S4T0U253">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="134,75" id="srcline75"> 75</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="134,76" id="srcline76"> 76</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'receiveData'</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,77" id="srcline77"> 77</a></span><span class="line">            [<span class="var type0" id="S2T0U261">varargout</span>{1}, <span class="var type0" id="S2T0U264">varargout</span>{2}, <span class="var type0" id="S2T0U267">varargout</span>{3}, <span class="var type0" id="S18T0U269">errStat</span>, <span class="var type0" id="S19T0U270">errStr</span>] = <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,78" id="srcline78"> 78</a></span><span class="line">                usrp_uhd_mapi(<span class="var type0" id="S3T0U273">cmd</span>, <span class="var type0" id="S4T0U275">varargin</span>{:});</span></span>
<span class="srcline"><span class="lineno"><a href="134,79" id="srcline79"> 79</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,80" id="srcline80"> 80</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="134,81" id="srcline81"> 81</a></span><span class="line"><span class="comment">% function is being called in codegen mode</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,82" id="srcline82"> 82</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,83" id="srcline83"> 83</a></span><span class="line">    <span class="comment">% not being found: </span></span></span>
<span class="srcline"><span class="lineno"><a href="134,84" id="srcline84"> 84</a></span><span class="line">    <span class="comment">% eml_allow_enum_inputs;</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,85" id="srcline85"> 85</a></span><span class="line">    <span class="comment">%errStat_i = int32(0);</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,86" id="srcline86"> 86</a></span><span class="line">    <span class="mxinfo" id="T1355:U28"><span class="var type1" id="S22T1355U280">errStat_i</span> = <span class="mxinfo" id="T1355:U30">UsrpErrorCapiEnumT(0)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,87" id="srcline87"> 87</a></span><span class="line">    <span class="mxinfo" id="T1478:U31"><span class="var type1" id="S19T1478U286">errStr</span>  = <span class="mxinfo" id="T1350:U33">char(zeros(1,<span class="var type1" id="S15T1U292">MAX_ERROR_MESSAGE_LENGTH</span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,88" id="srcline88"> 88</a></span><span class="line">    coder.varsize(<span class="string">'errStr'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,89" id="srcline89"> 89</a></span><span class="line">    <span class="mxinfo" id="T11:U35"><span class="var type1" id="S25T11U301">errStrSize</span> = <span class="mxinfo" id="T11:U37">int32(<span class="mxinfo" id="T1:U38">0</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,90" id="srcline90"> 90</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="134,91" id="srcline91"> 91</a></span><span class="line">    <span class="mxinfo" id="T139:U39"><span class="var type1" id="S27T139U307">cmd_c</span> = <span class="mxinfo" id="T139:U41">[<span class="var type1" id="S3T599U310">cmd</span> <span class="string">'_c'</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,92" id="srcline92"> 92</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="134,93" id="srcline93"> 93</a></span><span class="line">    <span class="keyword">switch</span> (<span class="var type1" id="S3T599U314">cmd</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="134,94" id="srcline94"> 94</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'sdruMexLock'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="134,95" id="srcline95"> 95</a></span><span class="line">             coder.ceval(<span class="string">'mexLock'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,96" id="srcline96"> 96</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'sdruMexUnlock'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="134,97" id="srcline97"> 97</a></span><span class="line">             coder.ceval(<span class="string">'mexUnlock'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,98" id="srcline98"> 98</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'reportDrivers'</span>, <span class="string">'getSDRuDriverVersion'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="134,99" id="srcline99"> 99</a></span><span class="line">            <span class="var type0" id="S28T0U342">flatAddrList</span>     = char(zeros(1,<span class="var type0" id="S13T0U348">MAX_STR_SIZE</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,100" id="srcline100">100</a></span><span class="line">            coder.varsize(<span class="string">'flatAddrList'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,101" id="srcline101">101</a></span><span class="line">            <span class="var type0" id="S29T0U357">flatAddrListSize</span> = int32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="134,102" id="srcline102">102</a></span><span class="line">            coder.ceval(<span class="var type0" id="S27T0U366">cmd_c</span>, coder.ref(<span class="var type0" id="S28T0U371">flatAddrList</span>), coder.wref(<span class="var type0" id="S22T0U376">errStat_i</span>), coder.ref(<span class="var type0" id="S19T0U381">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,103" id="srcline103">103</a></span><span class="line">            <span class="var type0" id="S29T0U384">flatAddrListSize</span> = coder.ceval(<span class="string">'strlen'</span>, coder.rref(<span class="var type0" id="S28T0U394">flatAddrList</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,104" id="srcline104">104</a></span><span class="line">            assert(<span class="var type0" id="S29T0U399">flatAddrListSize</span> &lt;= <span class="var type0" id="S13T0U400">MAX_STR_SIZE</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,105" id="srcline105">105</a></span><span class="line">            <span class="var type0" id="S28T0U403">flatAddrList</span>     = <span class="var type0" id="S28T0U405">flatAddrList</span>(1:<span class="var type0" id="S29T0U408">flatAddrListSize</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,106" id="srcline106">106</a></span><span class="line">            <span class="var type0" id="S2T0U412">varargout</span>{1}     = <span class="var type0" id="S28T0U414">flatAddrList</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,107" id="srcline107">107</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="134,108" id="srcline108">108</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'getSDRuList'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="134,109" id="srcline109">109</a></span><span class="line">            <span class="var type0" id="S31T0U421">addr_null</span>= [<span class="var type0" id="S4T0U425">varargin</span>{1} 0];</span></span>
<span class="srcline"><span class="lineno"><a href="134,110" id="srcline110">110</a></span><span class="line">            <span class="var type0" id="S32T0U430">addr_c</span>   = coder.opaque(<span class="string">'char *'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,111" id="srcline111">111</a></span><span class="line">            <span class="var type0" id="S32T0U438">addr_c</span>   = coder.ceval(<span class="string">'(char *)'</span>, coder.rref(<span class="var type0" id="S31T0U448">addr_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,112" id="srcline112">112</a></span><span class="line">            <span class="var type0" id="S28T0U451">flatAddrList</span>     = char(zeros(1,<span class="var type0" id="S13T0U457">MAX_STR_SIZE</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,113" id="srcline113">113</a></span><span class="line">            coder.varsize(<span class="string">'flatAddrList'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,114" id="srcline114">114</a></span><span class="line">            <span class="var type0" id="S29T0U466">flatAddrListSize</span> = int32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="134,115" id="srcline115">115</a></span><span class="line">            coder.ceval(<span class="var type0" id="S27T0U475">cmd_c</span>, <span class="var type0" id="S32T0U476">addr_c</span>, coder.ref(<span class="var type0" id="S28T0U481">flatAddrList</span>), coder.wref(<span class="var type0" id="S22T0U486">errStat_i</span>), coder.ref(<span class="var type0" id="S19T0U491">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,116" id="srcline116">116</a></span><span class="line">            <span class="var type0" id="S29T0U494">flatAddrListSize</span> = coder.ceval(<span class="string">'strlen'</span>, coder.rref(<span class="var type0" id="S28T0U504">flatAddrList</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,117" id="srcline117">117</a></span><span class="line">            assert(<span class="var type0" id="S29T0U509">flatAddrListSize</span> &lt;= <span class="var type0" id="S13T0U510">MAX_STR_SIZE</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,118" id="srcline118">118</a></span><span class="line">            <span class="var type0" id="S28T0U513">flatAddrList</span>     = <span class="var type0" id="S28T0U515">flatAddrList</span>(1:<span class="var type0" id="S29T0U518">flatAddrListSize</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,119" id="srcline119">119</a></span><span class="line">            <span class="var type0" id="S2T0U522">varargout</span>{1}     = <span class="var type0" id="S28T0U524">flatAddrList</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,120" id="srcline120">120</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="134,121" id="srcline121">121</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'createDriver'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="134,122" id="srcline122">122</a></span><span class="line">            <span class="comment">% NOTE: we expect to treat input strings as uint8 arrays in this</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,123" id="srcline123">123</a></span><span class="line">            <span class="comment">% code.  If we did not, then if the MATLAB char array involved chars</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,124" id="srcline124">124</a></span><span class="line">            <span class="comment">% that took up &gt;1 byte, we'd get an error from the coder mex about</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,125" id="srcline125">125</a></span><span class="line">            <span class="comment">% the array size changing.  ("The conversion from a unicode string</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,126" id="srcline126">126</a></span><span class="line">            <span class="comment">% to a local code page changes the number of characters.  This is </span></span></span>
<span class="srcline"><span class="lineno"><a href="134,127" id="srcline127">127</a></span><span class="line">            <span class="comment">% not supported.") For example, a block name of foo??ball will </span></span></span>
<span class="srcline"><span class="lineno"><a href="134,128" id="srcline128">128</a></span><span class="line">            <span class="comment">% error out.</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,129" id="srcline129">129</a></span><span class="line">            <span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,130" id="srcline130">130</a></span><span class="line">            <span class="comment">% The following code will handle input strings that have been passed</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,131" id="srcline131">131</a></span><span class="line">            <span class="comment">% in as uint8 arrays.  Callers must do the casting.</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,132" id="srcline132">132</a></span><span class="line">            <span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,133" id="srcline133">133</a></span><span class="line">            <span class="var type0" id="S33T0U531">driverApiH</span> = int32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="134,134" id="srcline134">134</a></span><span class="line">            <span class="var type0" id="S31T0U537">addr_null</span>= [<span class="var type0" id="S4T0U541">varargin</span>{1} 0];</span></span>
<span class="srcline"><span class="lineno"><a href="134,135" id="srcline135">135</a></span><span class="line">            <span class="var type0" id="S32T0U546">addr_c</span>   = coder.opaque(<span class="string">'char *'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,136" id="srcline136">136</a></span><span class="line">            <span class="var type0" id="S32T0U554">addr_c</span>   = coder.ceval(<span class="string">'(char *)'</span>, coder.rref(<span class="var type0" id="S31T0U564">addr_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,137" id="srcline137">137</a></span><span class="line">            <span class="var type0" id="S34T0U567">req_null</span> = [<span class="var type0" id="S4T0U571">varargin</span>{3} 0];</span></span>
<span class="srcline"><span class="lineno"><a href="134,138" id="srcline138">138</a></span><span class="line">            <span class="var type0" id="S35T0U576">req_c</span>    = coder.opaque(<span class="string">'char *'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,139" id="srcline139">139</a></span><span class="line">            <span class="var type0" id="S35T0U584">req_c</span>    = coder.ceval(<span class="string">'(char *)'</span>, coder.rref(<span class="var type0" id="S34T0U594">req_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,140" id="srcline140">140</a></span><span class="line">            coder.ceval(<span class="var type0" id="S27T0U600">cmd_c</span>, <span class="var type0" id="S32T0U601">addr_c</span>, <span class="var type0" id="S4T0U603">varargin</span>{2}, <span class="var type0" id="S35T0U605">req_c</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,141" id="srcline141">141</a></span><span class="line">                        coder.wref(<span class="var type0" id="S33T0U610">driverApiH</span>), coder.wref(<span class="var type0" id="S22T0U615">errStat_i</span>), coder.ref(<span class="var type0" id="S19T0U620">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,142" id="srcline142">142</a></span><span class="line">            <span class="var type0" id="S2T0U624">varargout</span>{1} = <span class="var type0" id="S33T0U626">driverApiH</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,143" id="srcline143">143</a></span><span class="line">            <span class="comment">% Tell coder that addr_null &amp; req_null must be alive and separate throughout the call to cmd_c.</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,144" id="srcline144">144</a></span><span class="line">            coder.ceval(<span class="string">'(void)'</span>, coder.rref(<span class="var type0" id="S31T0U637">addr_null</span>)); </span></span>
<span class="srcline"><span class="lineno"><a href="134,145" id="srcline145">145</a></span><span class="line">            coder.ceval(<span class="string">'(void)'</span>, coder.rref(<span class="var type0" id="S34T0U648">req_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,146" id="srcline146">146</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="134,147" id="srcline147">147</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'openDataConnection'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="134,148" id="srcline148">148</a></span><span class="line">            <span class="comment">% varargin   1      2         3          4              5       6         7</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,149" id="srcline149">149</a></span><span class="line">            <span class="comment">%           addr, boardId, requester, frameLength, dportType, buffMode, buffSize</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,150" id="srcline150">150</a></span><span class="line">            <span class="comment">% varargout  1         2         3</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,151" id="srcline151">151</a></span><span class="line">            <span class="comment">%           driverH, errStat, errMsg</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,152" id="srcline152">152</a></span><span class="line">            <span class="var type0" id="S33T0U655">driverApiH</span> = int32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="134,153" id="srcline153">153</a></span><span class="line">            <span class="var type0" id="S31T0U661">addr_null</span>= [<span class="var type0" id="S4T0U665">varargin</span>{1} 0];</span></span>
<span class="srcline"><span class="lineno"><a href="134,154" id="srcline154">154</a></span><span class="line">            <span class="var type0" id="S32T0U670">addr_c</span>   = coder.opaque(<span class="string">'char *'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,155" id="srcline155">155</a></span><span class="line">            <span class="var type0" id="S32T0U678">addr_c</span>   = coder.ceval(<span class="string">'(char *)'</span>, coder.rref(<span class="var type0" id="S31T0U688">addr_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,156" id="srcline156">156</a></span><span class="line">            <span class="var type0" id="S34T0U691">req_null</span> = [<span class="var type0" id="S4T0U695">varargin</span>{3} 0];</span></span>
<span class="srcline"><span class="lineno"><a href="134,157" id="srcline157">157</a></span><span class="line">            <span class="var type0" id="S35T0U700">req_c</span>    = coder.opaque(<span class="string">'char *'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,158" id="srcline158">158</a></span><span class="line">            <span class="var type0" id="S35T0U708">req_c</span>    = coder.ceval(<span class="string">'(char *)'</span>, coder.rref(<span class="var type0" id="S34T0U718">req_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,159" id="srcline159">159</a></span><span class="line">            assert(<span class="var type0" id="S4T0U724">varargin</span>{4}&lt;=<span class="var type0" id="S16T0U726">MAX_FRAMELENGTH</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,160" id="srcline160">160</a></span><span class="line">            <span class="var type0" id="S36T0U729">frameLength</span> = uint32(<span class="var type0" id="S4T0U733">varargin</span>{4});</span></span>
<span class="srcline"><span class="lineno"><a href="134,161" id="srcline161">161</a></span><span class="line">            <span class="var type0" id="S38T0U737">buffSize</span>    = uint32(<span class="var type0" id="S4T0U741">varargin</span>{7});</span></span>
<span class="srcline"><span class="lineno"><a href="134,162" id="srcline162">162</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="134,163" id="srcline163">163</a></span><span class="line">            coder.ceval(<span class="var type0" id="S27T0U748">cmd_c</span>, <span class="var type0" id="S32T0U749">addr_c</span>, <span class="var type0" id="S4T0U751">varargin</span>{2}, <span class="var type0" id="S35T0U753">req_c</span>, <span class="var type0" id="S36T0U754">frameLength</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,164" id="srcline164">164</a></span><span class="line">                        <span class="var type0" id="S4T0U756">varargin</span>{5}, <span class="var type0" id="S4T0U759">varargin</span>{6}, <span class="var type0" id="S38T0U761">buffSize</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,165" id="srcline165">165</a></span><span class="line">                        coder.wref(<span class="var type0" id="S33T0U766">driverApiH</span>), coder.wref(<span class="var type0" id="S22T0U771">errStat_i</span>), coder.ref(<span class="var type0" id="S19T0U776">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,166" id="srcline166">166</a></span><span class="line">            <span class="var type0" id="S2T0U780">varargout</span>{1} = <span class="var type0" id="S33T0U782">driverApiH</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,167" id="srcline167">167</a></span><span class="line">            <span class="comment">% Tell coder that addr_null &amp; req_null must be alive and separate throughout the call to cmd_c.</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,168" id="srcline168">168</a></span><span class="line">            coder.ceval(<span class="string">'(void)'</span>, coder.rref(<span class="var type0" id="S31T0U793">addr_null</span>)); </span></span>
<span class="srcline"><span class="lineno"><a href="134,169" id="srcline169">169</a></span><span class="line">            coder.ceval(<span class="string">'(void)'</span>, coder.rref(<span class="var type0" id="S34T0U804">req_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,170" id="srcline170">170</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="134,171" id="srcline171">171</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'deleteDriver'</span>, <span class="string">'setClockConfig'</span>, <span class="string">'closeDataConnection'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="134,172" id="srcline172">172</a></span><span class="line">            coder.ceval(<span class="var type1" id="S27T139U816">cmd_c</span>, <span class="var type1" id="S4T6U818">varargin</span>{:}, coder.wref(<span class="var type1" id="S22T1355U824">errStat_i</span>), coder.ref(<span class="mxinfo" id="T220:U47"><span class="var type1" id="S19T220U829">errStr</span></span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,173" id="srcline173">173</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="134,174" id="srcline174">174</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'checkSDRHostName'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="134,175" id="srcline175">175</a></span><span class="line">            <span class="var type0" id="S31T0U836">addr_null</span>= [<span class="var type0" id="S4T0U840">varargin</span>{1} 0];</span></span>
<span class="srcline"><span class="lineno"><a href="134,176" id="srcline176">176</a></span><span class="line">            <span class="var type0" id="S32T0U845">addr_c</span>   = coder.opaque(<span class="string">'char *'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,177" id="srcline177">177</a></span><span class="line">            <span class="var type0" id="S32T0U853">addr_c</span>   = coder.ceval(<span class="string">'(char *)'</span>, coder.rref(<span class="var type0" id="S31T0U863">addr_null</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,178" id="srcline178">178</a></span><span class="line">            coder.ceval(<span class="var type0" id="S27T0U869">cmd_c</span>, <span class="var type0" id="S32T0U870">addr_c</span>, coder.wref(<span class="var type0" id="S22T0U875">errStat_i</span>), coder.ref(<span class="var type0" id="S19T0U880">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,179" id="srcline179">179</a></span><span class="line">            <span class="comment">% Tell coder that addr_null  must be alive throughout the call to cmd_c.</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,180" id="srcline180">180</a></span><span class="line">            coder.ceval(<span class="string">'(void)'</span>, coder.rref(<span class="var type0" id="S31T0U891">addr_null</span>)); </span></span>
<span class="srcline"><span class="lineno"><a href="134,181" id="srcline181">181</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="134,182" id="srcline182">182</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'getDeviceDescription'</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,183" id="srcline183">183</a></span><span class="line">            <span class="var type0" id="S39T0U896">descStr</span> = char(zeros(1,<span class="var type0" id="S14T0U902">MAX_DEV_DESCR_STR_SIZE</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,184" id="srcline184">184</a></span><span class="line">            coder.varsize(<span class="string">'descStr'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,185" id="srcline185">185</a></span><span class="line">            <span class="var type0" id="S40T0U911">descStrSize</span> = int32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="134,186" id="srcline186">186</a></span><span class="line">            coder.ceval(<span class="var type0" id="S27T0U920">cmd_c</span>, <span class="var type0" id="S4T0U922">varargin</span>{:}, coder.ref(<span class="var type0" id="S39T0U928">descStr</span>), coder.wref(<span class="var type0" id="S22T0U933">errStat_i</span>), coder.ref(<span class="var type0" id="S19T0U938">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,187" id="srcline187">187</a></span><span class="line">            <span class="var type0" id="S40T0U941">descStrSize</span> = coder.ceval(<span class="string">'strlen'</span>, coder.rref(<span class="var type0" id="S39T0U951">descStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,188" id="srcline188">188</a></span><span class="line">            assert(<span class="var type0" id="S40T0U956">descStrSize</span> &lt;= <span class="var type0" id="S14T0U957">MAX_DEV_DESCR_STR_SIZE</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,189" id="srcline189">189</a></span><span class="line">            <span class="var type0" id="S39T0U960">descStr</span> = <span class="var type0" id="S39T0U962">descStr</span>(1:<span class="var type0" id="S40T0U965">descStrSize</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,190" id="srcline190">190</a></span><span class="line">            <span class="var type0" id="S2T0U969">varargout</span>{1} = <span class="var type0" id="S39T0U971">descStr</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,191" id="srcline191">191</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="134,192" id="srcline192">192</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'setClockConfigFull'</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,193" id="srcline193">193</a></span><span class="line">            <span class="var type0" id="S41T0U976">localClockConfig</span> = <span class="var type0" id="S4T0U978">varargin</span>{2};</span></span>
<span class="srcline"><span class="lineno"><a href="134,194" id="srcline194">194</a></span><span class="line">            coder.cstructname(<span class="var type0" id="S41T0U985">localClockConfig</span>, <span class="string">'ClockConfigCapiT'</span>, <span class="string">'extern'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,195" id="srcline195">195</a></span><span class="line">            coder.ceval(<span class="var type0" id="S27T0U993">cmd_c</span>, <span class="var type0" id="S4T0U995">varargin</span>{1}, <span class="var type0" id="S41T0U997">localClockConfig</span>, coder.wref(<span class="var type0" id="S22T0U1002">errStat_i</span>), coder.ref(<span class="var type0" id="S19T0U1007">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,196" id="srcline196">196</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="134,197" id="srcline197">197</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'setRate'</span>, <span class="string">'setGain'</span>, <span class="string">'getRate'</span>, <span class="string">'getFrequency'</span>, <span class="string">'getGain'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="134,198" id="srcline198">198</a></span><span class="line">            <span class="var type0" id="S42T0U1018">actualValue</span> = double(0);</span></span>
<span class="srcline"><span class="lineno"><a href="134,199" id="srcline199">199</a></span><span class="line">            coder.ceval(<span class="var type0" id="S27T0U1027">cmd_c</span>, <span class="var type0" id="S4T0U1029">varargin</span>{:}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,200" id="srcline200">200</a></span><span class="line">                        coder.wref(<span class="var type0" id="S42T0U1035">actualValue</span>), coder.wref(<span class="var type0" id="S22T0U1040">errStat_i</span>), coder.ref(<span class="var type0" id="S19T0U1045">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,201" id="srcline201">201</a></span><span class="line">            <span class="var type0" id="S2T0U1049">varargout</span>{1} = <span class="var type0" id="S42T0U1051">actualValue</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,202" id="srcline202">202</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="134,203" id="srcline203">203</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'setFrequency'</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,204" id="srcline204">204</a></span><span class="line">            <span class="var type0" id="S44T0U1056">tuneResult</span> = TuneResultCapiT();</span></span>
<span class="srcline"><span class="lineno"><a href="134,205" id="srcline205">205</a></span><span class="line">            coder.cstructname(<span class="var type0" id="S44T0U1064">tuneResult</span>, <span class="string">'TuneResultCapiT'</span>, <span class="string">'extern'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,206" id="srcline206">206</a></span><span class="line">            coder.ceval(<span class="var type0" id="S27T0U1072">cmd_c</span>, <span class="var type0" id="S4T0U1074">varargin</span>{:}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,207" id="srcline207">207</a></span><span class="line">                        coder.wref(<span class="var type0" id="S44T0U1080">tuneResult</span>), coder.wref(<span class="var type0" id="S22T0U1085">errStat_i</span>), coder.ref(<span class="var type0" id="S19T0U1090">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,208" id="srcline208">208</a></span><span class="line">            <span class="var type0" id="S2T0U1094">varargout</span>{1} = <span class="var type0" id="S44T0U1096">tuneResult</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,209" id="srcline209">209</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="134,210" id="srcline210">210</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'getFrequencyRange'</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,211" id="srcline211">211</a></span><span class="line">            <span class="var type0" id="S46T0U1101">freqRange</span> = FreqRangeCapiT();</span></span>
<span class="srcline"><span class="lineno"><a href="134,212" id="srcline212">212</a></span><span class="line">            coder.cstructname(<span class="var type0" id="S46T0U1109">freqRange</span>, <span class="string">'FreqRangeCapiT'</span>, <span class="string">'extern'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,213" id="srcline213">213</a></span><span class="line">            coder.ceval(<span class="var type0" id="S27T0U1117">cmd_c</span>, <span class="var type0" id="S4T0U1119">varargin</span>{:}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,214" id="srcline214">214</a></span><span class="line">                        coder.wref(<span class="var type0" id="S46T0U1125">freqRange</span>), coder.wref(<span class="var type0" id="S22T0U1130">errStat_i</span>), coder.ref(<span class="var type0" id="S19T0U1135">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,215" id="srcline215">215</a></span><span class="line">            <span class="var type0" id="S2T0U1139">varargout</span>{1} = <span class="var type0" id="S46T0U1141">freqRange</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,216" id="srcline216">216</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="134,217" id="srcline217">217</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'getGainRange'</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,218" id="srcline218">218</a></span><span class="line">            <span class="var type0" id="S48T0U1146">gainRange</span> = GainRangeCapiT();</span></span>
<span class="srcline"><span class="lineno"><a href="134,219" id="srcline219">219</a></span><span class="line">            coder.cstructname(<span class="var type0" id="S48T0U1154">gainRange</span>, <span class="string">'GainRangeCapiT'</span>, <span class="string">'extern'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,220" id="srcline220">220</a></span><span class="line">            coder.ceval(<span class="var type0" id="S27T0U1162">cmd_c</span>, <span class="var type0" id="S4T0U1164">varargin</span>{:}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,221" id="srcline221">221</a></span><span class="line">                        coder.wref(<span class="var type0" id="S48T0U1170">gainRange</span>), coder.wref(<span class="var type0" id="S22T0U1175">errStat_i</span>), coder.ref(<span class="var type0" id="S19T0U1180">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,222" id="srcline222">222</a></span><span class="line">            <span class="var type0" id="S2T0U1184">varargout</span>{1} = <span class="var type0" id="S48T0U1186">gainRange</span>;           </span></span>
<span class="srcline"><span class="lineno"><a href="134,223" id="srcline223">223</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="134,224" id="srcline224">224</a></span><span class="line">        <span class="keyword">case</span> <span class="string">'receiveData'</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,225" id="srcline225">225</a></span><span class="line">            <span class="comment">% 46336 represents 0.00185344 seconds at 25Msps.  1 ms seems to be a decent</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,226" id="srcline226">226</a></span><span class="line">            <span class="comment">% time interval to interact with the IP stack on a default glnxa64 machine.</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,227" id="srcline227">227</a></span><span class="line">            <span class="comment">% 32768 seems to be the max for UHD(TM) so we may want to change to that.</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,228" id="srcline228">228</a></span><span class="line">            assert(<span class="var type0" id="S4T0U1194">varargin</span>{6}&lt;=<span class="var type0" id="S16T0U1196">MAX_FRAMELENGTH</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,229" id="srcline229">229</a></span><span class="line">            <span class="var type0" id="S36T0U1199">frameLength</span> = uint32(<span class="var type0" id="S4T0U1203">varargin</span>{6});</span></span>
<span class="srcline"><span class="lineno"><a href="134,230" id="srcline230">230</a></span><span class="line">            <span class="var type0" id="S50T0U1207">data</span>        = complex(zeros(<span class="var type0" id="S16T0U1212">MAX_FRAMELENGTH</span>, 1, <span class="string">'int16'</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,231" id="srcline231">231</a></span><span class="line">            <span class="var type0" id="S52T0U1217">dataLength</span>  = uint32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="134,232" id="srcline232">232</a></span><span class="line">            <span class="var type0" id="S53T0U1223">overflow</span>    = uint32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="134,233" id="srcline233">233</a></span><span class="line">            coder.ceval(<span class="var type0" id="S27T0U1232">cmd_c</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,234" id="srcline234">234</a></span><span class="line">                <span class="var type0" id="S4T0U1234">varargin</span>{1}, <span class="var type0" id="S4T0U1237">varargin</span>{2}, <span class="var type0" id="S4T0U1240">varargin</span>{3}, <span class="var type0" id="S4T0U1243">varargin</span>{4}, <span class="var type0" id="S4T0U1246">varargin</span>{5}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,235" id="srcline235">235</a></span><span class="line">                coder.wref(<span class="var type0" id="S50T0U1252">data</span>), coder.wref(<span class="var type0" id="S52T0U1257">dataLength</span>), coder.wref(<span class="var type0" id="S53T0U1262">overflow</span>), <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,236" id="srcline236">236</a></span><span class="line">                coder.wref(<span class="var type0" id="S22T0U1267">errStat_i</span>), coder.ref(<span class="var type0" id="S19T0U1272">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,237" id="srcline237">237</a></span><span class="line">            <span class="var type0" id="S2T0U1276">varargout</span>{1} = <span class="var type0" id="S50T0U1278">data</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,238" id="srcline238">238</a></span><span class="line">            <span class="var type0" id="S2T0U1282">varargout</span>{2} = <span class="var type0" id="S52T0U1284">dataLength</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,239" id="srcline239">239</a></span><span class="line">            <span class="var type0" id="S2T0U1288">varargout</span>{3} = <span class="var type0" id="S53T0U1290">overflow</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,240" id="srcline240">240</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="134,241" id="srcline241">241</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'sendInt16Data'</span>,  <span class="string">'sendComplexInt16Data'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,242" id="srcline242">242</a></span><span class="line">              <span class="string">'sendSingleData'</span>, <span class="string">'sendComplexSingleData'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,243" id="srcline243">243</a></span><span class="line">              <span class="string">'sendDoubleData'</span>, <span class="string">'sendComplexDoubleData'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="134,244" id="srcline244">244</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="134,245" id="srcline245">245</a></span><span class="line">            assert(<span class="var type0" id="S4T0U1305">varargin</span>{7}&lt;=<span class="var type0" id="S16T0U1307">MAX_FRAMELENGTH</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,246" id="srcline246">246</a></span><span class="line">            <span class="var type0" id="S36T0U1310">frameLength</span> = uint32(<span class="var type0" id="S4T0U1314">varargin</span>{7});</span></span>
<span class="srcline"><span class="lineno"><a href="134,247" id="srcline247">247</a></span><span class="line">            <span class="var type0" id="S54T0U1318">underflow</span>   = uint32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="134,248" id="srcline248">248</a></span><span class="line">            coder.ceval(<span class="string">'sendData_c'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,249" id="srcline249">249</a></span><span class="line">                <span class="var type0" id="S4T0U1329">varargin</span>{1}, <span class="var type0" id="S4T0U1332">varargin</span>{2}, <span class="var type0" id="S4T0U1335">varargin</span>{3}, <span class="var type0" id="S4T0U1338">varargin</span>{4}, <span class="var type0" id="S4T0U1341">varargin</span>{5}, <span class="var type0" id="S4T0U1344">varargin</span>{6}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,250" id="srcline250">250</a></span><span class="line">                coder.wref(<span class="var type0" id="S54T0U1350">underflow</span>), coder.wref(<span class="var type0" id="S22T0U1355">errStat_i</span>), coder.ref(<span class="var type0" id="S19T0U1360">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,251" id="srcline251">251</a></span><span class="line">            <span class="var type0" id="S2T0U1364">varargout</span>{1} = <span class="var type0" id="S54T0U1366">underflow</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,252" id="srcline252">252</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="134,253" id="srcline253">253</a></span><span class="line">        <span class="keyword">case</span> {<span class="string">'sendInt16Data_x'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="134,254" id="srcline254">254</a></span><span class="line">            assert(<span class="var type0" id="S4T0U1376">varargin</span>{7}&lt;=<span class="var type0" id="S16T0U1378">MAX_FRAMELENGTH</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="134,255" id="srcline255">255</a></span><span class="line">            <span class="var type0" id="S36T0U1381">frameLength</span> = uint32(<span class="var type0" id="S4T0U1385">varargin</span>{7});</span></span>
<span class="srcline"><span class="lineno"><a href="134,256" id="srcline256">256</a></span><span class="line">            <span class="var type0" id="S55T0U1389">dPortDType</span>  = DataPortDataTypeCapiEnumT.DPortDTypeInt16;</span></span>
<span class="srcline"><span class="lineno"><a href="134,257" id="srcline257">257</a></span><span class="line">            <span class="var type0" id="S54T0U1395">underflow</span>   = uint32(0);</span></span>
<span class="srcline"><span class="lineno"><a href="134,258" id="srcline258">258</a></span><span class="line">            coder.ceval(<span class="string">'sendData_c'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,259" id="srcline259">259</a></span><span class="line">                <span class="var type0" id="S4T0U1406">varargin</span>{1}, <span class="var type0" id="S4T0U1409">varargin</span>{2}, <span class="var type0" id="S4T0U1412">varargin</span>{3}, <span class="var type0" id="S4T0U1415">varargin</span>{4}, <span class="var type0" id="S4T0U1418">varargin</span>{5}, <span class="var type0" id="S4T0U1421">varargin</span>{6}, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,260" id="srcline260">260</a></span><span class="line">                coder.wref(<span class="var type0" id="S54T0U1427">underflow</span>), coder.wref(<span class="var type0" id="S22T0U1432">errStat_i</span>), coder.ref(<span class="var type0" id="S19T0U1437">errStr</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="134,261" id="srcline261">261</a></span><span class="line">            <span class="var type0" id="S2T0U1441">varargout</span>{1} = <span class="var type0" id="S54T0U1443">underflow</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,262" id="srcline262">262</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,263" id="srcline263">263</a></span><span class="line">    <span class="comment">%errStat = UsrpErrorCapiEnumT(errStat_i);</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,264" id="srcline264">264</a></span><span class="line">    <span class="mxinfo" id="T1355:U49"><span class="var type1" id="S18T1355U1446">errStat</span>     = <span class="var type1" id="S22T1355U1447">errStat_i</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,265" id="srcline265">265</a></span><span class="line">    <span class="mxinfo" id="T11:U52"><span class="var type1" id="S25T11U1450">errStrSize</span>  = <span class="mxinfo" id="T11:U54">coder.ceval(<span class="string">'strlen'</span>, coder.rref(<span class="mxinfo" id="T220:U55"><span class="var type1" id="S19T220U1460">errStr</span></span>))</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,266" id="srcline266">266</a></span><span class="line">    <span class="mxinfo" id="T140:U57"><span class="extrinsicFcn" id="F2962N72:B1463">assert</span>(<span class="mxinfo" id="T2:U58"><span class="var type1" id="S25T11U1465">errStrSize</span> &lt;= <span class="mxinfo" id="T1:U60"><span class="var type1" id="S15T1U1466">MAX_ERROR_MESSAGE_LENGTH</span></span></span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,267" id="srcline267">267</a></span><span class="line">    <span class="mxinfo" id="T1478:U62"><span class="var type1" id="S19T1478U1469">errStr</span>      = <span class="mxinfo" id="T1478:U64"><span class="var type1" id="S19T1478U1471">errStr</span>(<span class="mxinfo" id="T11:U66">1</span>:<span class="var type1" id="S25T11U1474">errStrSize</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,268" id="srcline268">268</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,269" id="srcline269">269</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="134,270" id="srcline270">270</a></span><span class="line"><span class="keyword">switch</span> (<span class="var type1" id="S3T599U1477">cmd</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="134,271" id="srcline271">271</a></span><span class="line">    <span class="keyword">case</span> {<span class="string">'deleteDriver'</span>, <span class="string">'setClockConfig'</span>, <span class="string">'setClockConfigFull'</span>, <span class="string">'closeDataConnection'</span>, <span class="string">'checkSDRHostName'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="134,272" id="srcline272">272</a></span><span class="line">        <span class="mxinfo" id="T1355:U69"><span class="mxinfo" id="T1355:U70"><span class="var type1" id="S2T4U1489">varargout</span>{1}</span> = <span class="var type1" id="S18T1355U1491">errStat</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,273" id="srcline273">273</a></span><span class="line">        <span class="mxinfo" id="T1478:U73"><span class="mxinfo" id="T1478:U74"><span class="var type1" id="S2T4U1495">varargout</span>{2}</span> = <span class="var type1" id="S19T1478U1497">errStr</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,274" id="srcline274">274</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="134,275" id="srcline275">275</a></span><span class="line">    <span class="keyword">case</span> {<span class="string">'getSDRuList'</span>, <span class="string">'reportDrivers'</span>, <span class="string">'createDriver'</span>, <span class="string">'getDeviceDescription'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,276" id="srcline276">276</a></span><span class="line">          <span class="string">'setRate'</span>, <span class="string">'setFrequency'</span>, <span class="string">'setGain'</span>, <span class="string">'getRate'</span>, <span class="string">'getFrequency'</span>, <span class="string">'getGain'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,277" id="srcline277">277</a></span><span class="line">          <span class="string">'getFrequencyRange'</span>, <span class="string">'getGainRange'</span>, <span class="string">'openDataConnection'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,278" id="srcline278">278</a></span><span class="line">          <span class="string">'sendInt16Data'</span>,  <span class="string">'sendComplexInt16Data'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,279" id="srcline279">279</a></span><span class="line">          <span class="string">'sendSingleData'</span>, <span class="string">'sendComplexSingleData'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,280" id="srcline280">280</a></span><span class="line">          <span class="string">'sendDoubleData'</span>, <span class="string">'sendComplexDoubleData'</span>, <span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,281" id="srcline281">281</a></span><span class="line">          <span class="string">'sendInt16Data_x'</span>, <span class="string">'getSDRuDriverVersion'</span>}</span></span>
<span class="srcline"><span class="lineno"><a href="134,282" id="srcline282">282</a></span><span class="line">        <span class="var type0" id="S2T0U1525">varargout</span>{2} = <span class="var type0" id="S18T0U1527">errStat</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,283" id="srcline283">283</a></span><span class="line">        <span class="var type0" id="S2T0U1531">varargout</span>{3} = <span class="var type0" id="S19T0U1533">errStr</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,284" id="srcline284">284</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="134,285" id="srcline285">285</a></span><span class="line">    <span class="keyword">case</span> <span class="string">'receiveData'</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,286" id="srcline286">286</a></span><span class="line">        <span class="var type0" id="S2T0U1539">varargout</span>{4} = <span class="var type0" id="S18T0U1541">errStat</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,287" id="srcline287">287</a></span><span class="line">        <span class="var type0" id="S2T0U1545">varargout</span>{5} = <span class="var type0" id="S19T0U1547">errStr</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="134,288" id="srcline288">288</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="134,289" id="srcline289">289</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="134,290" id="srcline290">290</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
