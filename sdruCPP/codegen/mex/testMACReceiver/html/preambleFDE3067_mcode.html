<pre class="code">
<span class="srcline"><span class="lineno"><a href="173,53" id="srcline53">53</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="173,54" id="srcline54">54</a></span><span class="line"><span class="comment">% Calculate Equalizer Taps with preamble symbols</span></span></span>
<span class="srcline"><span class="lineno"><a href="173,55" id="srcline55">55</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S26T119U190">RGains</span> = preambleFDE(<span class="var type1" id="S27T1520U193">R</span>, <span class="var type1" id="S28T1524U194">Known</span>, <span class="var type1" id="S29T1522U195">hDataDemod</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="173,56" id="srcline56">56</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="173,57" id="srcline57">57</a></span><span class="line"><span class="comment">% Calculate non-normalized channel gains</span></span></span>
<span class="srcline"><span class="lineno"><a href="173,58" id="srcline58">58</a></span><span class="line"><span class="mxinfo" id="T1523:U5"><span class="var type1" id="S27T1523U198">R</span> = <span class="mxinfo" id="T1523:U7"><span class="var type1" id="S27T1520U200">R</span>(<span class="mxinfo" id="T764:U9"><span class="mxinfo" id="T1:U10">1</span>:(<span class="mxinfo" id="T1:U11"><span class="var type1" id="S29T1522U206">hDataDemod</span>.FFTLength-sum(<span class="var type1" id="S29T1522U211">hDataDemod</span>.NumGuardBandCarriers)</span>)</span>,<span class="mxinfo" id="T7:U14"><span class="mxinfo" id="T1:U15">1</span>:<span class="mxinfo" id="T1:U16">2</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="173,59" id="srcline59">59</a></span><span class="line"><span class="mxinfo" id="T1523:U17"><span class="var type1" id="S31T1523U218">RNormal</span> = <span class="mxinfo" id="T1523:U19"><span class="var type1" id="S27T1523U220">R</span>./<span class="var type1" id="S28T1524U221">Known</span></span></span>; <span class="comment">% Known is the original Long Preamble symbols </span></span></span>
<span class="srcline"><span class="lineno"><a href="173,60" id="srcline60">60</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="173,61" id="srcline61">61</a></span><span class="line"><span class="comment">% Scale channel gains</span></span></span>
<span class="srcline"><span class="lineno"><a href="173,62" id="srcline62">62</a></span><span class="line"><span class="mxinfo" id="T209:U22"><span class="var type1" id="S32T209U224">REnergy</span> = <span class="mxinfo" id="T209:U24">mean(<span class="mxinfo" id="T1524:U25"><span class="mxinfo" id="T1524:U26">abs(<span class="var type1" id="S31T1523U230">RNormal</span>)</span>.^2</span>,2)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="173,63" id="srcline63">63</a></span><span class="line"><span class="mxinfo" id="T119:U28"><span class="var type1" id="S35T119U235">RConj</span> = <span class="mxinfo" id="T119:U30">conj(<span class="mxinfo" id="T119:U31">mean(<span class="var type1" id="S31T1523U240">RNormal</span>,2)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="173,64" id="srcline64">64</a></span><span class="line"><span class="mxinfo" id="T119:U33"><span class="var type1" id="S26T119U244">RGains</span> = <span class="mxinfo" id="T119:U35"><span class="var type1" id="S35T119U246">RConj</span>./ <span class="var type1" id="S32T209U247">REnergy</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="173,65" id="srcline65">65</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="173,66" id="srcline66">66</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="173,67" id="srcline67">67</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="173,68" id="srcline68">68</a></span><span class="line"><span class="comment">% Calculate Equalizer Taps with pilot symbols</span></span></span>
</pre>
