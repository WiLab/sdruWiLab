<pre class="code">
<span class="srcline"><span class="lineno"><a href="8,1" id="srcline1">  1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T763U3">hPreambleDemod</span>,<span class="var type1" id="S3T746U4">hDataDemod</span>, <span class="var type1" id="S4T705U5">r</span>, <span class="var type1" id="S5T767U6">tx</span> ] = generateOFDMSignal_TX2(<span class="mxinfo" id="T3:U5"><span class="var type2" id="S6T3V1U9">inputPayloadMessage</span></span>, <span class="mxinfo" id="T1:U7"><span class="var type2" id="S7T1V2U10">samplingFreq</span></span> )</span></span>
<span class="srcline"><span class="lineno"><a href="8,2" id="srcline2">  2</a></span><span class="line"><span class="comment">% generateOFDMSignal: Generate OFDM signal based on the 802.11a standard.</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,3" id="srcline3">  3</a></span><span class="line"><span class="comment">% This function returns the time domain signal and a structure containing</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,4" id="srcline4">  4</a></span><span class="line"><span class="comment">% details about the signal itself.  This information is required by the</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,5" id="srcline5">  5</a></span><span class="line"><span class="comment">% receiver to operate correctly.</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,6" id="srcline6">  6</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,7" id="srcline7">  7</a></span><span class="line"><span class="comment">%% System Parameters</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,8" id="srcline8">  8</a></span><span class="line"><span class="mxinfo" id="T1:U9"><span class="var type1" id="S8T1U13">FFTLength</span> = <span class="mxinfo" id="T1:U11">64</span></span>;         <span class="comment">% OFDM modulator FFT size</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,9" id="srcline9">  9</a></span><span class="line"><span class="mxinfo" id="T2:U12"><span class="var type1" id="S9T2U17">enableMA</span> = <span class="mxinfo" id="T2:U14">true</span></span>;    <span class="comment">% Enable moving averages for estimates</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,10" id="srcline10"> 10</a></span><span class="line"><span class="mxinfo" id="T1:U15"><span class="var type1" id="S11T1U22">numFrames</span> = <span class="mxinfo" id="T1:U17">30</span></span>;<span class="comment">%30     % Make larger to reduce underflow</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,11" id="srcline11"> 11</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,12" id="srcline12"> 12</a></span><span class="line"><span class="comment">% Message to transmit</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,13" id="srcline13"> 13</a></span><span class="line"><span class="comment">% message is 80 characters max, so extra 3 for EOF and 1 for uniqueID</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,14" id="srcline14"> 14</a></span><span class="line"><span class="keyword">if</span> length(<span class="var type1" id="S6T3U29">inputPayloadMessage</span>) &lt; 76</span></span>
<span class="srcline"><span class="lineno"><a href="8,15" id="srcline15"> 15</a></span><span class="line">   <span class="mxinfo" id="T13:U19"><span class="var type1" id="S13T13U33">uniqueID</span> = <span class="mxinfo" id="T13:U21">char(<span class="mxinfo" id="T1:U22">randi([0 (2^7)-1],1,1)</span>)</span></span>;<span class="comment">%Add additional character to differentiate messages</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,16" id="srcline16"> 16</a></span><span class="line">   <span class="mxinfo" id="T216:U23"><span class="var type1" id="S16T216U51">payloadMessage</span> = <span class="mxinfo" id="T216:U25">[<span class="var type1" id="S6T3U54">inputPayloadMessage</span>,<span class="var type1" id="S13T13U55">uniqueID</span>,<span class="mxinfo" id="T151:U28"><span class="string">'EOF'</span></span>,<span class="mxinfo" id="T15:U29">repmat(<span class="string">'-'</span>,1,76 - length(<span class="var type1" id="S6T3U65">inputPayloadMessage</span>))</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,17" id="srcline17"> 17</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,18" id="srcline18"> 18</a></span><span class="line"><span class="comment">%% Create Short Preamble</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,19" id="srcline19"> 19</a></span><span class="line"><span class="mxinfo" id="T119:U31"><span class="var type1" id="S18T119U68">shortPreamble</span> = <span class="mxinfo" id="T119:U33">[ 0 0  1+1i 0 0 0  -1-1i 0 0 0 <span class="keyword">...</span></span></span><span class="comment"><span class="mxinfo" id="T119:U31"><span class="mxinfo" id="T119:U33"> </span></span><span class="comment"><span class="mxinfo" id="T119:U31"><span class="mxinfo" id="T119:U33">% [-27:-17]</span></span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,20" id="srcline20"> 20</a></span><span class="line"><span class="mxinfo" id="T119:U31"><span class="mxinfo" id="T119:U33"> 1+1i 0 0 0  -1-1i 0 0 0 -1-1i 0 0 0   1+1i 0 0 0 <span class="keyword">...</span></span></span><span class="comment"><span class="mxinfo" id="T119:U31"><span class="mxinfo" id="T119:U33"> </span></span><span class="comment"><span class="mxinfo" id="T119:U31"><span class="mxinfo" id="T119:U33">% [-16:-1]</span></span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,21" id="srcline21"> 21</a></span><span class="line"><span class="mxinfo" id="T119:U31"><span class="mxinfo" id="T119:U33"> 0    0 0 0  -1-1i 0 0 0 -1-1i 0 0 0   1+1i 0 0 0 <span class="keyword">...</span></span></span><span class="comment"><span class="mxinfo" id="T119:U31"><span class="mxinfo" id="T119:U33"> </span></span><span class="comment"><span class="mxinfo" id="T119:U31"><span class="mxinfo" id="T119:U33">% [0:15]</span></span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,22" id="srcline22"> 22</a></span><span class="line"><span class="mxinfo" id="T119:U31"><span class="mxinfo" id="T119:U33"> 1+1i 0 0 0   1+1i 0 0 0  1+1i 0 0 ].'</span></span>;               <span class="comment">% [16:27]</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,23" id="srcline23"> 23</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,24" id="srcline24"> 24</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,25" id="srcline25"> 25</a></span><span class="line"><span class="comment">% % Create modulator</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,26" id="srcline26"> 26</a></span><span class="line"><span class="comment">% hPreambleMod = OFDMModulator(<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,27" id="srcline27"> 27</a></span><span class="line"><span class="comment">%     'NumGuardBandCarriers', [6; 5],<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,28" id="srcline28"> 28</a></span><span class="line"><span class="comment">%     'CyclicPrefixLength',   0,<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,29" id="srcline29"> 29</a></span><span class="line"><span class="comment">%     'FFTLength' ,           FFTLength,<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,30" id="srcline30"> 30</a></span><span class="line"><span class="comment">%     'NumSymbols',           1);    </span></span></span>
<span class="srcline"><span class="lineno"><a href="8,31" id="srcline31"> 31</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,32" id="srcline32"> 32</a></span><span class="line"><span class="comment">% Create modulator</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,33" id="srcline33"> 33</a></span><span class="line"><span class="mxinfo" id="T123:U34"><span class="var type1" id="S19T123U156">hPreambleMod</span> = <span class="mxinfo" id="T123:U36"><span class="fcn" id="F34N25:B158">OFDMModulator</span>(<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,34" id="srcline34"> 34</a></span><span class="line"><span class="mxinfo" id="T123:U34"><span class="mxinfo" id="T123:U36">    <span class="string">'NumGuardBandCarriers'</span>, [6; 5],<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,35" id="srcline35"> 35</a></span><span class="line"><span class="mxinfo" id="T123:U34"><span class="mxinfo" id="T123:U36">    <span class="string">'CyclicPrefixLength'</span>,   0,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,36" id="srcline36"> 36</a></span><span class="line"><span class="mxinfo" id="T123:U34"><span class="mxinfo" id="T123:U36">    <span class="string">'FFTLength'</span> ,           64,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,37" id="srcline37"> 37</a></span><span class="line"><span class="mxinfo" id="T123:U34"><span class="mxinfo" id="T123:U36">    <span class="string">'NumSymbols'</span>,           1)</span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="8,38" id="srcline38"> 38</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,39" id="srcline39"> 39</a></span><span class="line"><span class="comment">% Modulate and scale</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,40" id="srcline40"> 40</a></span><span class="line"><span class="mxinfo" id="T197:U37"><span class="var type1" id="S21T197U173">shortPreambleOFDM</span> = <span class="mxinfo" id="T197:U39"><span class="mxinfo" id="T1:U40">sqrt(13/6)</span>*<span class="mxinfo" id="T197:U41">step(<span class="var type1" id="S19T123U182">hPreambleMod</span>, <span class="var type1" id="S18T119U183">shortPreamble</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,41" id="srcline41"> 41</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,42" id="srcline42"> 42</a></span><span class="line"><span class="comment">% Form 10 Short Preambles</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,43" id="srcline43"> 43</a></span><span class="line"><span class="mxinfo" id="T702:U44"><span class="var type1" id="S24T702U186">completeShortPreambleOFDM</span> = <span class="mxinfo" id="T702:U46">[<span class="var type1" id="S21T197U189">shortPreambleOFDM</span>; <span class="var type1" id="S21T197U191">shortPreambleOFDM</span>; <span class="mxinfo" id="T1324:U49"><span class="var type1" id="S21T197U194">shortPreambleOFDM</span>(<span class="mxinfo" id="T1325:U51"><span class="mxinfo" id="T1:U52">1</span>:<span class="mxinfo" id="T1:U53">32</span></span>)</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,44" id="srcline44"> 44</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,45" id="srcline45"> 45</a></span><span class="line"><span class="comment">%% Create Long Preamble</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,46" id="srcline46"> 46</a></span><span class="line"><span class="mxinfo" id="T209:U54"><span class="var type1" id="S25T209U200">longPreamble</span> = <span class="mxinfo" id="T209:U56">[1,  1, -1, -1,  1,  1, -1,  1, -1,  1,  1,  1,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,47" id="srcline47"> 47</a></span><span class="line"><span class="mxinfo" id="T209:U54"><span class="mxinfo" id="T209:U56">                   1,  1,  1, -1, -1,  1,  1, -1,  1, -1,  1,  1,  1,  1, 0,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,48" id="srcline48"> 48</a></span><span class="line"><span class="mxinfo" id="T209:U54"><span class="mxinfo" id="T209:U56">                   1, -1, -1,  1,  1, -1,  1, -1,  1, -1, -1, -1, -1, -1,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,49" id="srcline49"> 49</a></span><span class="line"><span class="mxinfo" id="T209:U54"><span class="mxinfo" id="T209:U56">                   1,  1, -1, -1,  1, -1,  1, -1,  1,  1,  1,  1].'</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,50" id="srcline50"> 50</a></span><span class="line"> </span></span>
<span class="srcline"><span class="lineno"><a href="8,51" id="srcline51"> 51</a></span><span class="line"><span class="comment">% Modulate</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,52" id="srcline52"> 52</a></span><span class="line"><span class="mxinfo" id="T197:U57"><span class="var type1" id="S26T197U280">longPreambleOFDM</span> = <span class="mxinfo" id="T197:U59">step( <span class="var type1" id="S19T123U283">hPreambleMod</span>, complex(<span class="var type1" id="S25T209U286">longPreamble</span>,0) )</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,53" id="srcline53"> 53</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,54" id="srcline54"> 54</a></span><span class="line"><span class="comment">% Form 2 Long Preambles</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,55" id="srcline55"> 55</a></span><span class="line"><span class="mxinfo" id="T702:U62"><span class="var type1" id="S28T702U290">completeLongPreambleOFDM</span> =<span class="mxinfo" id="T702:U64">[<span class="mxinfo" id="T1324:U65"><span class="var type1" id="S26T197U294">longPreambleOFDM</span>(<span class="mxinfo" id="T1325:U67"><span class="mxinfo" id="T1:U68">33</span>:<span class="mxinfo" id="T1:U69">64</span></span>)</span>; <span class="var type1" id="S26T197U299">longPreambleOFDM</span>; <span class="var type1" id="S26T197U301">longPreambleOFDM</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,56" id="srcline56"> 56</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,57" id="srcline57"> 57</a></span><span class="line"><span class="comment">%% Generate Data</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,58" id="srcline58"> 58</a></span><span class="line"><span class="mxinfo" id="T1:U72"><span class="var type1" id="S29T1U304">numCarriers</span> = <span class="mxinfo" id="T1:U74">48</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,59" id="srcline59"> 59</a></span><span class="line"><span class="mxinfo" id="T1:U75"><span class="var type1" id="S30T1U308">CyclicPrefixLength</span> = <span class="mxinfo" id="T1:U77">16</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,60" id="srcline60"> 60</a></span><span class="line"><span class="mxinfo" id="T154:U78"><span class="var type1" id="S31T154U312">PilotCarrierIndices</span> = <span class="mxinfo" id="T154:U80">[12;26;40;54]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,61" id="srcline61"> 61</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,62" id="srcline62"> 62</a></span><span class="line"><span class="comment">% Use string as message</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,63" id="srcline63"> 63</a></span><span class="line"><span class="mxinfo" id="T221:U81"><span class="var type1" id="S32T221U324">originalData</span> = <span class="mxinfo" id="T221:U83"><span class="fcn" id="F384N39:B326">OFDMletters2bits</span>(<span class="var type1" id="S16T216U327">payloadMessage</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,64" id="srcline64"> 64</a></span><span class="line"><span class="mxinfo" id="T223:U85"><span class="var type1" id="S32T223U330">originalData</span> = <span class="mxinfo" id="T223:U87">reshape(<span class="mxinfo" id="T222:U88"><span class="var type1" id="S32T221U334">originalData</span>.'</span>,size(<span class="var type1" id="S32T221U338">originalData</span>,1)*size(<span class="var type1" id="S32T221U342">originalData</span>,2),1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,65" id="srcline65"> 65</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,66" id="srcline66"> 66</a></span><span class="line"><span class="comment">% Generate CRC</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,67" id="srcline67"> 67</a></span><span class="line"><span class="mxinfo" id="T319:U92"><span class="var type1" id="S36T319U347">hGen</span> = <span class="mxinfo" id="T319:U94">comm.CRCGenerator([1 0 0 1], <span class="string">'ChecksumsPerFrame'</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,68" id="srcline68"> 68</a></span><span class="line"><span class="mxinfo" id="T381:U95"><span class="var type1" id="S38T381U362">dataWithCRC</span> = <span class="mxinfo" id="T381:U97">step(<span class="var type1" id="S36T319U365">hGen</span>, <span class="var type1" id="S32T223U366">originalData</span>)</span></span>;<span class="comment">% Add CRC</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,69" id="srcline69"> 69</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,70" id="srcline70"> 70</a></span><span class="line"><span class="comment">% Construct modulator for each subcarrier</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,71" id="srcline71"> 71</a></span><span class="line"><span class="mxinfo" id="T408:U100"><span class="var type1" id="S39T408U369">hMod</span> = <span class="mxinfo" id="T408:U102">comm.BPSKModulator</span></span>; <span class="comment">% BPSK</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,72" id="srcline72"> 72</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,73" id="srcline73"> 73</a></span><span class="line"><span class="comment">% Apply modulator for each subcarrier</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,74" id="srcline74"> 74</a></span><span class="line"><span class="mxinfo" id="T469:U103"><span class="var type1" id="S40T469U375">modData</span> = <span class="mxinfo" id="T469:U105">step(<span class="var type1" id="S39T408U378">hMod</span>, <span class="var type1" id="S38T381U379">dataWithCRC</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,75" id="srcline75"> 75</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,76" id="srcline76"> 76</a></span><span class="line"><span class="comment">% Pad IFFT</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,77" id="srcline77"> 77</a></span><span class="line"><span class="mxinfo" id="T1:U108"><span class="var type1" id="S41T1U382">padBits</span> = <span class="mxinfo" id="T1:U110"><span class="var type1" id="S29T1U384">numCarriers</span> - mod(length(<span class="var type1" id="S40T469U389">modData</span>),<span class="var type1" id="S29T1U390">numCarriers</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,78" id="srcline78"> 78</a></span><span class="line"><span class="keyword">if</span> <span class="var type1" id="S41T1U394">padBits</span> == <span class="var type1" id="S29T1U395">numCarriers</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,79" id="srcline79"> 79</a></span><span class="line">    <span class="var type0" id="S41T0U398">padBits</span> = 0;</span></span>
<span class="srcline"><span class="lineno"><a href="8,80" id="srcline80"> 80</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,81" id="srcline81"> 81</a></span><span class="line"><span class="mxinfo" id="T534:U116"><span class="var type1" id="S40T534U402">modData</span> = <span class="mxinfo" id="T534:U118">[<span class="var type1" id="S40T469U405">modData</span>; <span class="mxinfo" id="T532:U120">step(<span class="var type1" id="S39T408U409">hMod</span>,<span class="mxinfo" id="T471:U122">randi([0 1],<span class="var type1" id="S41T1U416">padBits</span>,1)</span>)</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,82" id="srcline82"> 82</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,83" id="srcline83"> 83</a></span><span class="line"><span class="comment">% Calculate required data sizes for correct receiver operation</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,84" id="srcline84"> 84</a></span><span class="line"><span class="mxinfo" id="T1:U124"><span class="var type1" id="S43T1U420">numDataSymbols</span> = <span class="mxinfo" id="T1:U126">length(<span class="var type1" id="S40T534U424">modData</span>)/<span class="var type1" id="S29T1U425">numCarriers</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,85" id="srcline85"> 85</a></span><span class="line"><span class="mxinfo" id="T1:U129"><span class="var type1" id="S44T1U428">numSamples</span> = <span class="mxinfo" id="T1:U131">length(<span class="var type1" id="S40T534U431">modData</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,86" id="srcline86"> 86</a></span><span class="line"><span class="mxinfo" id="T1:U133"><span class="var type1" id="S45T1U434">messageCharacters</span> = <span class="mxinfo" id="T1:U135">length(<span class="var type1" id="S16T216U437">payloadMessage</span>)</span></span>; <span class="comment">% Save desired message size</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,87" id="srcline87"> 87</a></span><span class="line"><span class="mxinfo" id="T1:U137"><span class="var type1" id="S11T1U440">numFrames</span> = <span class="mxinfo" id="T1:U139"><span class="var type1" id="S11T1U441">numFrames</span></span></span>; <span class="comment">% Save number of transmitted frames</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,88" id="srcline88"> 88</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,89" id="srcline89"> 89</a></span><span class="line"><span class="comment">% Convert data into subcarrier streams</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,90" id="srcline90"> 90</a></span><span class="line"><span class="mxinfo" id="T536:U141"><span class="var type1" id="S46T536U444">ofdmData</span> = <span class="mxinfo" id="T536:U143">reshape(<span class="mxinfo" id="T535:U144"><span class="var type1" id="S40T534U448">modData</span>.'</span>, <span class="var type1" id="S29T1U449">numCarriers</span>, length(<span class="var type1" id="S40T534U453">modData</span>)/<span class="var type1" id="S29T1U454">numCarriers</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,91" id="srcline91"> 91</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,92" id="srcline92"> 92</a></span><span class="line"><span class="comment">% Create Pilots</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,93" id="srcline93"> 93</a></span><span class="line"><span class="mxinfo" id="T538:U149"><span class="var type1" id="S47T538U457">hPN</span> = <span class="mxinfo" id="T538:U151">comm.PNSequence(<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,94" id="srcline94"> 94</a></span><span class="line"><span class="mxinfo" id="T538:U149"><span class="mxinfo" id="T538:U151">        <span class="string">'Polynomial'</span>,[1 0 0 0 1 0 0 1],<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,95" id="srcline95"> 95</a></span><span class="line"><span class="mxinfo" id="T538:U149"><span class="mxinfo" id="T538:U151">        <span class="string">'SamplesPerFrame'</span>, <span class="var type1" id="S43T1U474">numDataSymbols</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,96" id="srcline96"> 96</a></span><span class="line"><span class="mxinfo" id="T538:U149"><span class="mxinfo" id="T538:U151">        <span class="string">'InitialConditions'</span>,[1 1 1 1 1 1 1])</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,97" id="srcline97"> 97</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,98" id="srcline98"> 98</a></span><span class="line"><span class="mxinfo" id="T539:U153"><span class="var type1" id="S48T539U487">pilot</span> = <span class="mxinfo" id="T539:U155">step(<span class="var type1" id="S47T538U490">hPN</span>)</span></span>; <span class="comment">% Create pilot</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,99" id="srcline99"> 99</a></span><span class="line"><span class="mxinfo" id="T540:U157"><span class="var type1" id="S49T540U493">pilots</span> = <span class="mxinfo" id="T540:U159">repmat(<span class="var type1" id="S48T539U496">pilot</span>, 1, 4 )</span></span>; <span class="comment">% Expand to all pilot tones</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,100" id="srcline100">100</a></span><span class="line"><span class="mxinfo" id="T541:U161"><span class="var type1" id="S49T541U501">pilots</span> = <span class="mxinfo" id="T541:U163"><span class="mxinfo" id="T541:U164"><span class="mxinfo" id="T1:U165">2</span>*<span class="mxinfo" id="T541:U166">double(<span class="mxinfo" id="T1326:U167"><span class="mxinfo" id="T541:U168"><span class="var type1" id="S49T540U509">pilots</span>.'</span>&lt;<span class="mxinfo" id="T1:U170">1</span></span>)</span></span>-<span class="mxinfo" id="T1:U171">1</span></span></span>; <span class="comment">% Bipolar to unipolar</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,101" id="srcline101">101</a></span><span class="line"><span class="mxinfo" id="T542:U172"><span class="mxinfo" id="T542:U173"><span class="var type1" id="S49T541U515">pilots</span>(<span class="mxinfo" id="T1:U175">4</span>,:)</span> = <span class="mxinfo" id="T542:U176"><span class="mxinfo" id="T1:U177">-1</span>*<span class="mxinfo" id="T542:U178"><span class="var type1" id="S49T541U522">pilots</span>(<span class="mxinfo" id="T1:U180">4</span>,:)</span></span></span>; <span class="comment">% Invert last pilot</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,102" id="srcline102">102</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,103" id="srcline103">103</a></span><span class="line"><span class="comment">% Construct Modulator</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,104" id="srcline104">104</a></span><span class="line"><span class="mxinfo" id="T632:U181"><span class="var type1" id="S51T632U527">hDataMod</span> = <span class="mxinfo" id="T632:U183"><span class="fcn" id="F1051N37:B529">OFDMModulator</span>(<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,105" id="srcline105">105</a></span><span class="line"><span class="mxinfo" id="T632:U181"><span class="mxinfo" id="T632:U183">    <span class="string">'CyclicPrefixLength'</span>,   <span class="var type1" id="S30T1U531">CyclicPrefixLength</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,106" id="srcline106">106</a></span><span class="line"><span class="mxinfo" id="T632:U181"><span class="mxinfo" id="T632:U183">    <span class="string">'FFTLength'</span> ,           <span class="var type1" id="S8T1U533">FFTLength</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,107" id="srcline107">107</a></span><span class="line"><span class="mxinfo" id="T632:U181"><span class="mxinfo" id="T632:U183">    <span class="string">'NumGuardBandCarriers'</span>, <span class="var type1" id="S19T123U536">hPreambleMod</span>.NumGuardBandCarriers,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,108" id="srcline108">108</a></span><span class="line"><span class="mxinfo" id="T632:U181"><span class="mxinfo" id="T632:U183">    <span class="string">'NumSymbols'</span>,           <span class="var type1" id="S43T1U539">numDataSymbols</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,109" id="srcline109">109</a></span><span class="line"><span class="mxinfo" id="T632:U181"><span class="mxinfo" id="T632:U183">    <span class="string">'PilotInputPort'</span>,       true,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,110" id="srcline110">110</a></span><span class="line"><span class="mxinfo" id="T632:U181"><span class="mxinfo" id="T632:U183">    <span class="string">'PilotCarrierIndices'</span>,  <span class="var type1" id="S31T154U544">PilotCarrierIndices</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,111" id="srcline111">111</a></span><span class="line"><span class="mxinfo" id="T632:U181"><span class="mxinfo" id="T632:U183">    <span class="string">'InsertDCNull'</span>,         true)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,112" id="srcline112">112</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,113" id="srcline113">113</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,114" id="srcline114">114</a></span><span class="line"><span class="comment">% Modulate</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,115" id="srcline115">115</a></span><span class="line"><span class="mxinfo" id="T701:U189"><span class="var type1" id="S4T701U550">r</span> = <span class="mxinfo" id="T701:U191">step(<span class="var type1" id="S51T632U553">hDataMod</span>, <span class="var type1" id="S46T536U554">ofdmData</span>, <span class="var type1" id="S49T541U555">pilots</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,116" id="srcline116">116</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,117" id="srcline117">117</a></span><span class="line"><span class="comment">% Add preambles to data</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,118" id="srcline118">118</a></span><span class="line"><span class="mxinfo" id="T703:U195"><span class="var type1" id="S52T703U558">preambles</span> = <span class="mxinfo" id="T703:U197">[<span class="var type1" id="S24T702U561">completeShortPreambleOFDM</span>; <span class="var type1" id="S28T702U563">completeLongPreambleOFDM</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,119" id="srcline119">119</a></span><span class="line"><span class="mxinfo" id="T704:U200"><span class="var type1" id="S4T704U566">r</span> = <span class="mxinfo" id="T704:U202">[<span class="var type1" id="S52T703U569">preambles</span>; <span class="var type1" id="S4T701U571">r</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,120" id="srcline120">120</a></span><span class="line"><span class="mxinfo" id="T1:U205"><span class="var type1" id="S53T1U574">frameLength</span> = <span class="mxinfo" id="T1:U207">length(<span class="var type1" id="S4T704U577">r</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,121" id="srcline121">121</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,122" id="srcline122">122</a></span><span class="line"><span class="comment">% Repeat frame (Used in debugging)</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,123" id="srcline123">123</a></span><span class="line"><span class="mxinfo" id="T705:U209"><span class="var type1" id="S4T705U580">r</span> = <span class="mxinfo" id="T705:U211">repmat(<span class="var type1" id="S4T704U583">r</span>, <span class="var type1" id="S11T1U584">numFrames</span>, 1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,124" id="srcline124">124</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,125" id="srcline125">125</a></span><span class="line"><span class="comment">% Save Demodulator object data for receiver</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,126" id="srcline126">126</a></span><span class="line"><span class="comment">%hDataDemod = get(OFDMDemodulator(hDataMod));</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,127" id="srcline127">127</a></span><span class="line"><span class="comment">%hPreambleDemod = get(OFDMDemodulator(hPreambleMod));</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,128" id="srcline128">128</a></span><span class="line"><span class="mxinfo" id="T746:U214"><span class="var type1" id="S3T746U588">hDataDemod</span> = <span class="mxinfo" id="T746:U216"><span class="fcn" id="F1380N23:B590">OFDMDemodulator</span>(<span class="var type1" id="S51T632U591">hDataMod</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,129" id="srcline129">129</a></span><span class="line"><span class="mxinfo" id="T763:U218"><span class="var type1" id="S2T763U594">hPreambleDemod</span> = <span class="mxinfo" id="T763:U220"><span class="fcn" id="F1433N24:B596">OFDMDemodulator</span>(<span class="var type1" id="S19T123U597">hPreambleMod</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,130" id="srcline130">130</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,131" id="srcline131">131</a></span><span class="line"><span class="comment">% Calcuate OFDM frequency bin size</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,132" id="srcline132">132</a></span><span class="line"><span class="mxinfo" id="T1:U222"><span class="var type1" id="S55T1U600">freqBin</span> = <span class="mxinfo" id="T1:U224"><span class="var type1" id="S7T1U602">samplingFreq</span>/<span class="var type1" id="S8T1U603">FFTLength</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,133" id="srcline133">133</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,134" id="srcline134">134</a></span><span class="line"><span class="comment">% Calculate locations of pilots without guardbands</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,135" id="srcline135">135</a></span><span class="line"><span class="mxinfo" id="T154:U227"><span class="var type1" id="S56T154U606">pilotLocationsWithoutGuardbands</span> = <span class="mxinfo" id="T154:U229"><span class="var type1" id="S3T746U609">hDataDemod</span>.PilotCarrierIndices-<span class="var type1" id="S3T746U613">hDataDemod</span>.NumGuardBandCarriers(1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,136" id="srcline136">136</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,137" id="srcline137">137</a></span><span class="line"><span class="comment">% Calculate locations of subcarrier datastreams without guardbands</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,138" id="srcline138">138</a></span><span class="line"><span class="mxinfo" id="T764:U232"><span class="var type1" id="S57T764U618">dataSubcarrierIndexies</span> = <span class="mxinfo" id="T764:U234">1:<span class="var type1" id="S8T1U622">FFTLength</span>-sum(<span class="var type1" id="S3T746U626">hDataDemod</span>.NumGuardBandCarriers)</span></span>;<span class="comment">%Remove guardband offsets</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,139" id="srcline139">139</a></span><span class="line"><span class="mxinfo" id="T1:U237"><span class="var type1" id="S59T1U630">DCNullLocation</span> = <span class="mxinfo" id="T1:U239"><span class="mxinfo" id="T1:U240">33</span> - <span class="mxinfo" id="T1:U241"><span class="mxinfo" id="T38:U242"><span class="var type1" id="S3T746U635">hDataDemod</span>.NumGuardBandCarriers</span>(<span class="mxinfo" id="T1:U244">1</span>)</span></span></span>;<span class="comment">%Remove index offsets for pilots and guardbands</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,140" id="srcline140">140</a></span><span class="line"><span class="comment">%dataSubcarrierIndexies([pilotLocationsWithoutGuardbands;DCNullLocation]) = [];%Remove pilot and DCNull locations</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,141" id="srcline141">141</a></span><span class="line"><span class="mxinfo" id="T766:U245"><span class="var type1" id="S57T766U640">dataSubcarrierIndexies</span> = <span class="mxinfo" id="T1327:U247">[<span class="mxinfo" id="T173:U248">1:5</span>,<span class="mxinfo" id="T765:U249">7:19</span>,<span class="mxinfo" id="T172:U250">21:26</span>,<span class="mxinfo" id="T172:U251">28:33</span>,<span class="mxinfo" id="T765:U252">35:47</span>,<span class="mxinfo" id="T173:U253">49:53</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,142" id="srcline142">142</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,143" id="srcline143">143</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,144" id="srcline144">144</a></span><span class="line"><span class="comment">% Preallocate values needed later</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,145" id="srcline145">145</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,146" id="srcline146">146</a></span><span class="line"><span class="comment">% Create return structure</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,147" id="srcline147">147</a></span><span class="line"><span class="mxinfo" id="T767:U254"><span class="var type1" id="S5T767U663">tx</span> = <span class="mxinfo" id="T767:U256">struct(<span class="string">'originalData'</span>,<span class="var type1" id="S32T223U667">originalData</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,148" id="srcline148">148</a></span><span class="line"><span class="mxinfo" id="T767:U254"><span class="mxinfo" id="T767:U256">            <span class="string">'shortPreambleOFDM'</span>,<span class="var type1" id="S21T197U669">shortPreambleOFDM</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,149" id="srcline149">149</a></span><span class="line"><span class="mxinfo" id="T767:U254"><span class="mxinfo" id="T767:U256">            <span class="string">'completeShortPreambleOFDM'</span>,<span class="var type1" id="S24T702U671">completeShortPreambleOFDM</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,150" id="srcline150">150</a></span><span class="line"><span class="mxinfo" id="T767:U254"><span class="mxinfo" id="T767:U256">            <span class="string">'shortPreamble'</span>,<span class="mxinfo" id="T119:U260"><span class="var type1" id="S18T119U673">shortPreamble</span></span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,151" id="srcline151">151</a></span><span class="line"><span class="mxinfo" id="T767:U254"><span class="mxinfo" id="T767:U256">            <span class="string">'longPreamble'</span>,<span class="mxinfo" id="T209:U262"><span class="var type1" id="S25T209U675">longPreamble</span></span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,152" id="srcline152">152</a></span><span class="line"><span class="mxinfo" id="T767:U254"><span class="mxinfo" id="T767:U256">            <span class="string">'longPreambleOFDM'</span>,<span class="var type1" id="S26T197U677">longPreambleOFDM</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,153" id="srcline153">153</a></span><span class="line"><span class="mxinfo" id="T767:U254"><span class="mxinfo" id="T767:U256">            <span class="string">'completeLongPreambleOFDM'</span>,<span class="var type1" id="S28T702U679">completeLongPreambleOFDM</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,154" id="srcline154">154</a></span><span class="line"><span class="mxinfo" id="T767:U254"><span class="mxinfo" id="T767:U256">            <span class="string">'pilots'</span>,<span class="var type1" id="S49T541U681">pilots</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,155" id="srcline155">155</a></span><span class="line"><span class="mxinfo" id="T767:U254"><span class="mxinfo" id="T767:U256">            <span class="string">'preambles'</span>,<span class="var type1" id="S52T703U683">preambles</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,156" id="srcline156">156</a></span><span class="line"><span class="mxinfo" id="T767:U254"><span class="mxinfo" id="T767:U256">            <span class="string">'pilotLocationsWithoutGuardbands'</span>,<span class="mxinfo" id="T154:U268"><span class="var type1" id="S56T154U685">pilotLocationsWithoutGuardbands</span></span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,157" id="srcline157">157</a></span><span class="line"><span class="mxinfo" id="T767:U254"><span class="mxinfo" id="T767:U256">            <span class="string">'dataSubcarrierIndexies'</span>,<span class="var type1" id="S57T766U687">dataSubcarrierIndexies</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,158" id="srcline158">158</a></span><span class="line"><span class="mxinfo" id="T767:U254"><span class="mxinfo" id="T767:U256">            <span class="string">'samplingFreq'</span>,<span class="mxinfo" id="T1:U271"><span class="var type1" id="S7T1U689">samplingFreq</span></span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,159" id="srcline159">159</a></span><span class="line"><span class="mxinfo" id="T767:U254"><span class="mxinfo" id="T767:U256">            <span class="string">'FFTLength'</span>,<span class="mxinfo" id="T1:U273"><span class="var type1" id="S8T1U691">FFTLength</span></span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,160" id="srcline160">160</a></span><span class="line"><span class="mxinfo" id="T767:U254"><span class="mxinfo" id="T767:U256">            <span class="string">'enableMA'</span>,<span class="mxinfo" id="T2:U275"><span class="var type1" id="S9T2U693">enableMA</span></span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,161" id="srcline161">161</a></span><span class="line"><span class="mxinfo" id="T767:U254"><span class="mxinfo" id="T767:U256">            <span class="string">'numCarriers'</span>,<span class="mxinfo" id="T1:U277"><span class="var type1" id="S29T1U695">numCarriers</span></span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,162" id="srcline162">162</a></span><span class="line"><span class="mxinfo" id="T767:U254"><span class="mxinfo" id="T767:U256">            <span class="string">'padBits'</span>,<span class="mxinfo" id="T1:U279"><span class="var type1" id="S41T1U697">padBits</span></span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,163" id="srcline163">163</a></span><span class="line"><span class="mxinfo" id="T767:U254"><span class="mxinfo" id="T767:U256">            <span class="string">'numSamples'</span>,<span class="mxinfo" id="T1:U281"><span class="var type1" id="S44T1U699">numSamples</span></span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,164" id="srcline164">164</a></span><span class="line"><span class="mxinfo" id="T767:U254"><span class="mxinfo" id="T767:U256">            <span class="string">'messageCharacters'</span>,<span class="mxinfo" id="T1:U283"><span class="var type1" id="S45T1U701">messageCharacters</span></span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,165" id="srcline165">165</a></span><span class="line"><span class="mxinfo" id="T767:U254"><span class="mxinfo" id="T767:U256">            <span class="string">'numFrames'</span>,<span class="mxinfo" id="T1:U285"><span class="var type1" id="S11T1U703">numFrames</span></span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,166" id="srcline166">166</a></span><span class="line"><span class="mxinfo" id="T767:U254"><span class="mxinfo" id="T767:U256">            <span class="string">'frameLength'</span>,<span class="mxinfo" id="T1:U287"><span class="var type1" id="S53T1U705">frameLength</span></span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,167" id="srcline167">167</a></span><span class="line"><span class="mxinfo" id="T767:U254"><span class="mxinfo" id="T767:U256">            <span class="string">'freqBin'</span>,<span class="mxinfo" id="T1:U289"><span class="var type1" id="S55T1U707">freqBin</span></span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,168" id="srcline168">168</a></span><span class="line"><span class="mxinfo" id="T767:U254"><span class="mxinfo" id="T767:U256">            <span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,169" id="srcline169">169</a></span><span class="line"><span class="mxinfo" id="T767:U254"><span class="mxinfo" id="T767:U256">            <span class="string">'DecimationFactor'</span>,<span class="mxinfo" id="T1:U291">0</span>,<span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="8,170" id="srcline170">170</a></span><span class="line"><span class="mxinfo" id="T767:U254"><span class="mxinfo" id="T767:U256">            <span class="string">'receiveBufferLength'</span>,<span class="mxinfo" id="T1:U292">0</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,171" id="srcline171">171</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,172" id="srcline172">172</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,173" id="srcline173">173</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,174" id="srcline174">174</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,175" id="srcline175">175</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,176" id="srcline176">176</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,177" id="srcline177">177</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,178" id="srcline178">178</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,179" id="srcline179">179</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,180" id="srcline180">180</a></span><span class="line"><span class="comment">%                             padBits: 13</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,181" id="srcline181">181</a></span><span class="line"><span class="comment">%                          numSamples: 576</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,182" id="srcline182">182</a></span><span class="line"><span class="comment">%                   messageCharacters: 80</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,183" id="srcline183">183</a></span><span class="line"><span class="comment">%                           numFrames: 1000</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,184" id="srcline184">184</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,185" id="srcline185">185</a></span><span class="line"><span class="comment">%                         frameLength: 1280</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,186" id="srcline186">186</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,187" id="srcline187">187</a></span><span class="line"><span class="comment">%                             freqBin: 312500</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,188" id="srcline188">188</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,189" id="srcline189">189</a></span><span class="line"><span class="comment">%                          hDataDemod: [1x1 struct]</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,190" id="srcline190">190</a></span><span class="line"><span class="comment">%                      hPreambleDemod: [1x1 struct]</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,191" id="srcline191">191</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,192" id="srcline192">192</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,193" id="srcline193">193</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,194" id="srcline194">194</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,195" id="srcline195">195</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,196" id="srcline196">196</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,197" id="srcline197">197</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,198" id="srcline198">198</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,199" id="srcline199">199</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,200" id="srcline200">200</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,201" id="srcline201">201</a></span><span class="line"></span></span>
</pre>
